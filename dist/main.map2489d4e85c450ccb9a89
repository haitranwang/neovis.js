{"version":3,"file":"neovis-without-dependencies.js","mappings":"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","sources":["webpack://NeoVis/webpack/universalModuleDefinition","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/array/is-array\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/keys\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/map\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/entries\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/entries\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/entries\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/keys\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/keys\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/keys\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/promise\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/set-timeout\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/symbol\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/symbol\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/symbol\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/weak-map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/weak-map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/weak-map\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/weak-set\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/weak-set\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/weak-set\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\",\"amd\":\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\",\"amd\":\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"}","webpack://NeoVis/external umd {\"commonjs\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"amd\":\"@babel/runtime-corejs3/helpers/defineProperty\"}","webpack://NeoVis/external umd {\"commonjs\":\"deepmerge\",\"commonjs2\":\"deepmerge\",\"amd\":\"deepmerge\"}","webpack://NeoVis/external umd {\"commonjs\":\"neo4j-driver\",\"commonjs2\":\"neo4j-driver\",\"amd\":\"neo4j-driver\"}","webpack://NeoVis/external umd {\"commonjs\":\"neo4j-driver-core\",\"commonjs2\":\"neo4j-driver-core\",\"amd\":\"neo4j-driver-core\"}","webpack://NeoVis/external umd {\"commonjs\":\"vis-network/standalone\",\"commonjs2\":\"vis-network/standalone\",\"amd\":\"vis-network/standalone\"}","webpack://NeoVis/webpack/bootstrap","webpack://NeoVis/webpack/runtime/compat get default export","webpack://NeoVis/webpack/runtime/define property getters","webpack://NeoVis/webpack/runtime/hasOwnProperty shorthand","webpack://NeoVis/webpack/runtime/make namespace object","webpack://NeoVis/./src/defaults.ts","webpack://NeoVis/./src/events.ts","webpack://NeoVis/./src/types.ts","webpack://NeoVis/./src/neovis.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"), require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"), require(\"@babel/runtime-corejs3/core-js-stable/object/entries\"), require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-set\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"neo4j-driver\"), require(\"neo4j-driver-core\"), require(\"vis-network/standalone\"), require(\"deepmerge\"), require(\"@babel/runtime-corejs3/core-js-stable/symbol\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@babel/runtime-corejs3/helpers/defineProperty\", \"@babel/runtime-corejs3/helpers/classPrivateFieldSet\", \"@babel/runtime-corejs3/helpers/classPrivateFieldGet\", \"@babel/runtime-corejs3/core-js-stable/object/keys\", \"@babel/runtime-corejs3/core-js-stable/instance/reduce\", \"@babel/runtime-corejs3/core-js-stable/object/entries\", \"@babel/runtime-corejs3/core-js-stable/array/is-array\", \"@babel/runtime-corejs3/core-js-stable/instance/map\", \"@babel/runtime-corejs3/core-js-stable/instance/concat\", \"@babel/runtime-corejs3/core-js-stable/weak-map\", \"@babel/runtime-corejs3/core-js-stable/weak-set\", \"@babel/runtime-corejs3/core-js-stable/instance/for-each\", \"@babel/runtime-corejs3/core-js-stable/promise\", \"@babel/runtime-corejs3/core-js-stable/instance/keys\", \"@babel/runtime-corejs3/core-js-stable/set-timeout\", \"neo4j-driver\", \"neo4j-driver-core\", \"vis-network/standalone\", \"deepmerge\", \"@babel/runtime-corejs3/core-js-stable/symbol\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NeoVis\"] = factory(require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldSet\"), require(\"@babel/runtime-corejs3/helpers/classPrivateFieldGet\"), require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"), require(\"@babel/runtime-corejs3/core-js-stable/object/entries\"), require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"), require(\"@babel/runtime-corejs3/core-js-stable/weak-set\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/keys\"), require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"), require(\"neo4j-driver\"), require(\"neo4j-driver-core\"), require(\"vis-network/standalone\"), require(\"deepmerge\"), require(\"@babel/runtime-corejs3/core-js-stable/symbol\"));\n\telse\n\t\troot[\"NeoVis\"] = factory(root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__783__, __WEBPACK_EXTERNAL_MODULE__642__, __WEBPACK_EXTERNAL_MODULE__779__, __WEBPACK_EXTERNAL_MODULE__995__, __WEBPACK_EXTERNAL_MODULE__83__, __WEBPACK_EXTERNAL_MODULE__209__, __WEBPACK_EXTERNAL_MODULE__852__, __WEBPACK_EXTERNAL_MODULE__820__, __WEBPACK_EXTERNAL_MODULE__848__, __WEBPACK_EXTERNAL_MODULE__317__, __WEBPACK_EXTERNAL_MODULE__483__, __WEBPACK_EXTERNAL_MODULE__349__, __WEBPACK_EXTERNAL_MODULE__723__, __WEBPACK_EXTERNAL_MODULE__270__, __WEBPACK_EXTERNAL_MODULE__519__, __WEBPACK_EXTERNAL_MODULE__949__, __WEBPACK_EXTERNAL_MODULE__55__, __WEBPACK_EXTERNAL_MODULE__365__, __WEBPACK_EXTERNAL_MODULE__613__, __WEBPACK_EXTERNAL_MODULE__581__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__852__;","module.exports = __WEBPACK_EXTERNAL_MODULE__848__;","module.exports = __WEBPACK_EXTERNAL_MODULE__349__;","module.exports = __WEBPACK_EXTERNAL_MODULE__270__;","module.exports = __WEBPACK_EXTERNAL_MODULE__820__;","module.exports = __WEBPACK_EXTERNAL_MODULE__83__;","module.exports = __WEBPACK_EXTERNAL_MODULE__209__;","module.exports = __WEBPACK_EXTERNAL_MODULE__995__;","module.exports = __WEBPACK_EXTERNAL_MODULE__723__;","module.exports = __WEBPACK_EXTERNAL_MODULE__519__;","module.exports = __WEBPACK_EXTERNAL_MODULE__581__;","module.exports = __WEBPACK_EXTERNAL_MODULE__317__;","module.exports = __WEBPACK_EXTERNAL_MODULE__483__;","module.exports = __WEBPACK_EXTERNAL_MODULE__779__;","module.exports = __WEBPACK_EXTERNAL_MODULE__642__;","module.exports = __WEBPACK_EXTERNAL_MODULE__783__;","module.exports = __WEBPACK_EXTERNAL_MODULE__613__;","module.exports = __WEBPACK_EXTERNAL_MODULE__949__;","module.exports = __WEBPACK_EXTERNAL_MODULE__55__;","module.exports = __WEBPACK_EXTERNAL_MODULE__365__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const defaults = {\r\n\r\n\tneo4j: {\r\n\t\tinitialQuery: `MATCH (n) WHERE exists(n.pagerank)\r\n                        WITH (n), RAND() AS random\r\n                        ORDER BY random LIMIT 3000\r\n                        OPTIONAL MATCH (n)-[r]-(m)\r\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\r\n                        RETURN n, r, m;`,\r\n\t\tneo4jUri: 'bolt://localhost:7687',\r\n\t\tneo4jUser: 'neo4j',\r\n\t\tneo4jPassword: 'neo4j',\r\n\t\tdriverConfig: {\r\n\t\t\tencrypted: 'ENCRYPTION_OFF',\r\n\t\t\ttrust: 'TRUST_ALL_CERTIFICATES',\r\n\t\t\tmaxConnectionPoolSize: 100,\r\n\t\t\tconnectionAcquisitionTimeout: 10000,\r\n\t\t\tdisableLosslessIntegers: true,\r\n\t\t},\r\n\t\tgroupAsLabel: true\r\n\t},\r\n\r\n\tvisJs: {\r\n\t\tnodes: {\r\n\t\t\tfont: {\r\n\t\t\t\tsize: 26,\r\n\t\t\t\tstrokeWidth: 7\r\n\t\t\t},\r\n\t\t\tscaling: {}\r\n\t\t},\r\n\t\tedges: {\r\n\t\t\tarrows: {\r\n\t\t\t\tto: { enabled: false }\r\n\t\t\t},\r\n\t\t\tlength: 200\r\n\t\t},\r\n\t\tlayout: {\r\n\t\t\timprovedLayout: false,\r\n\t\t\thierarchical: {\r\n\t\t\t\tenabled: false,\r\n\t\t\t\tsortMethod: 'hubsize'\r\n\t\t\t}\r\n\t\t},\r\n\t\tphysics: { // TODO: adaptive physics settings based on size of graph rendered\r\n\t\t\t// enabled: true,\r\n\t\t\t// timestep: 0.5,\r\n\t\t\t// stabilization: {\r\n\t\t\t//     iterations: 10\r\n\t\t\t// }\r\n\r\n\t\t\tadaptiveTimestep: true,\r\n\t\t\t// barnesHut: {\r\n\t\t\t//     gravitationalConstant: -8000,\r\n\t\t\t//     springConstant: 0.04,\r\n\t\t\t//     springLength: 95\r\n\t\t\t// },\r\n\t\t\tstabilization: {\r\n\t\t\t\titerations: 200,\r\n\t\t\t\tfit: true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport { defaults };","import { Edge, Node } from './types';\r\n\r\nexport enum NeoVisEvents {\r\n\tCompletionEvent = 'completed',\r\n\tClickNodeEvent = 'clickNode',\r\n\tClickEdgeEvent = 'clickEdge',\r\n\tErrorEvent = 'error'\r\n}\r\n\r\nexport interface EventFunctionTypes {\r\n\t[NeoVisEvents.CompletionEvent]: (event: { recordCount: number }) => void;\r\n\t[NeoVisEvents.ClickNodeEvent]: (event: { nodeId: number, node: Node }) => void;\r\n\t[NeoVisEvents.ClickEdgeEvent]: (event: { edgeId: number, edge: Edge }) => void;\r\n\t[NeoVisEvents.ErrorEvent]: (event: { error: Error }) => void;\r\n}\r\n\r\nexport class EventController {\r\n\tprivate readonly _handlers: { [p: string]: Function[] };\r\n\r\n\tconstructor() {\r\n\t\tthis._handlers = {\r\n\t\t\t[NeoVisEvents.CompletionEvent]: [],\r\n\t\t\t[NeoVisEvents.ErrorEvent]: [],\r\n\t\t\t[NeoVisEvents.ClickNodeEvent]: [],\r\n\t\t\t[NeoVisEvents.ClickEdgeEvent]: [],\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param eventType - Type of the event to be handled\r\n\t * @param handler - Handler to manage the event\r\n\t */\r\n\tregister<T extends NeoVisEvents>(eventType: T, handler: EventFunctionTypes[T]): void {\r\n\t\tif (this._handlers[eventType] === undefined) {\r\n\t\t\tthrow new Error('Unknown event: ' + eventType);\r\n\t\t}\r\n\r\n\t\tthis._handlers[eventType].push(handler);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {string} eventType - Type of the event generated\r\n\t * @param {any} values - Values associated to the event\r\n\t */\r\n\tgenerateEvent<T extends NeoVisEvents>(eventType: T, values: Parameters<EventFunctionTypes[T]>[0]): void {\r\n\t\tif (this._handlers[eventType] === undefined) {\r\n\t\t\tthrow new Error('Unknown event: ' + eventType);\r\n\t\t}\r\n\r\n\t\tfor (const handler of this._handlers[eventType]) {\r\n\t\t\thandler(values);\r\n\t\t}\r\n\t}\r\n}\r\n","import type * as Neo4jTypes from 'neo4j-driver';\r\nimport type * as VisNetwork from 'vis-network';\r\n\r\n\r\nexport const NEOVIS_DEFAULT_CONFIG = Symbol();\r\nexport const NEOVIS_ADVANCED_CONFIG = Symbol();\r\nexport type NumberOrInteger = number | Neo4jTypes.Integer;\r\n\r\nexport type RecursiveMapToDist<T, New> = T extends object ? RecursiveMapTo<T, New> : New\r\n\r\n/**\r\n * Maps a type recursively and replace each non object type with the new type\r\n * @param <T> type to map\r\n * @param <New> type to map to for each non object type\r\n */\r\nexport type RecursiveMapTo<T, New> = { [P in keyof T]: RecursiveMapToDist<T[P], New> }\r\n\r\nexport type RecursiveMapToFunctionDist<T, PARAM_TYPE> = T extends object ? ((param: PARAM_TYPE) => T) | (RecursiveMapToFunction<T, PARAM_TYPE>) : (param: PARAM_TYPE) => T\r\n/**\r\n * Maps a type recursively and adds the ability for each object property to be a function that returns the same type\r\n * but replace each non object type with a function that returns the same type\r\n * @param <T> type to map\r\n * @param <PARAM_TYPE> type of parameter the functions get\r\n */\r\nexport type RecursiveMapToFunction<T, PARAM_TYPE> = {\r\n\t[P in keyof T]: RecursiveMapToFunctionDist<T[P], PARAM_TYPE>\r\n};\r\n\r\n/**\r\n * Cypher quarry\r\n */\r\nexport type Cypher = string;\r\n\r\nexport interface NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> {\r\n\t/**\r\n\t * Static values that will the same for every node/relationship\r\n\t * */\r\n\tstatic?: VIS_TYPE;\r\n\t/**\r\n\t * Cypher that will be called for every object (will look the same as\r\n\t */\r\n\tcypher?: RecursiveMapTo<VIS_TYPE, Cypher>;\r\n\tfunction?: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>;\r\n}\r\n\r\nexport interface NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> extends NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> {\r\n\tproperty?: RecursiveMapTo<VIS_TYPE, string>;\r\n}\r\n\r\nexport type NeovisDataConfig<VIS_TYPE, NEO_TYPE> =\r\n\tRecursiveMapTo<VIS_TYPE, string>\r\n\t& { [NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE> };\r\n\r\n/**\r\n * A mapper between neo4j node properties names to vis-network node config\r\n * @link https://visjs.github.io/vis-network/docs/network/nodes.html\r\n */\r\nexport interface LabelConfig extends RecursiveMapTo<VisNetwork.Node, string> {\r\n\t/**\r\n\t * advance options which allow for:\r\n\t * mapping static options to each node\r\n\t * mapping cypher to run for each node to determine vis-network node option\r\n\t * mapping function that gets the neo4j node and returns vis-network node option\r\n\t */\r\n\t[NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VisNetwork.Node, Neo4jTypes.Node<number>>;\r\n}\r\n\r\n/**\r\n * A mapper between neo4j relationship properties names to vis-network edge config\r\n * @link https://visjs.github.io/vis-network/docs/network/edges.html\r\n */\r\nexport interface RelationshipConfig extends RecursiveMapTo<VisNetwork.Edge, string> {\r\n\t/**\r\n\t * advance options which allow for:\r\n\t * mapping static options to each edge\r\n\t * mapping cypher to run for each relationship to determine vis-network edge option\r\n\t * mapping function that gets the neo4j relationship and returns vis-network edge option\r\n\t */\r\n\t[NEOVIS_ADVANCED_CONFIG]?: NeoVisAdvanceConfig<VisNetwork.Edge, Neo4jTypes.Relationship<number>>;\r\n}\r\n\r\nexport interface Neo4jConfig {\r\n\t/**\r\n\t * neo4j server\r\n\t * @example bolt://localhost:7687\r\n\t */\r\n\tserverUrl?: string;\r\n\tserverUser?: string;\r\n\tserverPassword?: string;\r\n\t/**\r\n\t * @link https://neo4j.com/docs/api/javascript-driver/current/function/index.html#configuration\r\n\t */\r\n\tdriverConfig?: Neo4jTypes.Config;\r\n}\r\n\r\nexport interface BaseNeovisConfig {\r\n\t/**\r\n\t * Html id of the element you want Neovis to render on\r\n\t */\r\n\tcontainerId: string;\r\n\t/**\r\n\t * database name you want to connect to\r\n\t * @default neo4j\r\n\t */\r\n\tserverDatabase?: string;\r\n\t/**\r\n\t * Neo4j Driver instance or configuration to make one\r\n\t */\r\n\tneo4j?: Neo4jTypes.Driver | Neo4jConfig;\r\n\t/**\r\n\t * Vis network config to override neovis defaults\r\n\t * @link https://visjs.github.io/vis-network/docs/network/#options\r\n\t */\r\n\tvisConfig?: VisNetwork.Options;\r\n\r\n\r\n\t/**\r\n\t * function to get the data instead of neo4j driver\r\n\t * @returns list of neo4j data\r\n\t */\r\n\tdataFunction?: (any?: any) => AsyncIterable<Neo4jTypes.Record> | Promise<Iterable<Neo4jTypes.Record>>\r\n\r\n\t/**\r\n\t * The Cypher query that will get the data\r\n\t */\r\n\tinitialCypher?: Cypher;\r\n\t/**\r\n\t * Should output debug messages to console\r\n\t * @default false\r\n\t */\r\n\tconsoleDebug?: boolean;\r\n\r\n\t/**\r\n\t * Should group be the label\r\n\t * @default true\r\n\t */\r\n\tgroupAsLabel?: boolean;\r\n\r\n\t/**\r\n\t * Tells Neovis is the config is flat or not\r\n\t * @default false\r\n\t */\r\n\tnonFlat?: boolean;\r\n}\r\n\r\n/**\r\n * @example\r\n * ```js\r\n * //simple\r\n * {\r\n *      containerId: \"viz\",\r\n *      neo4j: {\r\n *      \tserverUrl: \"bolt://localhost:7687\",\r\n *      \tserverUser: \"neo4j\",\r\n *      \tserverPassword: \"sorts-swims-burglaries\"\r\n *      },\r\n *      labels: {\r\n *      \tCharacter: {\r\n *      \t\tlabel: \"name\",\r\n *      \t\tvalue: \"pagerank\",\r\n *      \t\tgroup: \"community\"\r\n *      \t}\r\n *      },\r\n *      relationships: {\r\n *      \tINTERACTS: {\r\n *      \t\tvalue: \"weight\"\r\n *      \t}\r\n *      },\r\n *      initialCypher: \"MATCH (n)-[r:INTERACTS]->(m) RETURN n,r,m\"\r\n * }\r\n * // advance\r\n * {\r\n *      containerId: 'viz',\r\n *      neo4j: {\r\n *      \tserverUrl: 'bolt://localhost:7687',\r\n *      \tserverUser: 'neo4j',\r\n *      \tserverPassword: 'gland-presentation-worry'\r\n *      },\r\n *      visConfig: {\r\n *      \tnodes: {\r\n *      \t\tshape: 'square'\r\n *      \t},\r\n *      \tedges: {\r\n *      \t\tarrows: {\r\n *      \t\t\tto: {enabled: true}\r\n *      \t\t}\r\n *      \t},\r\n *      },\r\n *      labels: {\r\n *      \tCharacter: {\r\n *      \t\tlabel: 'pagerank',\r\n *      \t\tgroup: 'community',\r\n *      \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\r\n *      \t\t\tcypher: {\r\n *      \t\t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\r\n *      \t\t\t},\r\n *      \t\t\tfunction: {\r\n *      \t\t\t\ttitle: (node) => {\r\n *      \t\t\t\t\treturn viz.nodeToHtml(node, undefined);\r\n *      \t\t\t\t}\r\n *      \t\t\t},\r\n *      \t\t}\r\n *      \t}\r\n *      },\r\n *      relationships: {\r\n *      \tINTERACTS: {\r\n *      \t\tvalue: 'weight',\r\n *      \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\r\n *      \t\t\tfunction: {\r\n *      \t\t\t\ttitle: (edge) => {\r\n *      \t\t\t\t\treturn viz.nodeToHtml(edge, undefined);\r\n *      \t\t\t\t}\r\n *      \t\t\t},\r\n *      \t\t}\r\n *      \t}\r\n *      },\r\n *      initialCypher: 'MATCH (n)-[r]->(m) RETURN n,r,m'\r\n * }\r\n * ```\r\n */\r\nexport interface NeovisConfig extends BaseNeovisConfig {\r\n\tnonFlat?: false;\r\n\t/**\r\n\t * @example ```javascript\r\n\t *{\r\n\t * \tCharacter: {\r\n\t * \tlabel: 'pagerank',\r\n\t * \t\tgroup: 'community',\r\n\t * \t\t[Neovis.NEOVIS_ADVANCED_CONFIG]: {\r\n\t * \t\t\tcypher: {\r\n\t * \t\t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\r\n\t * \t\t\t},\r\n\t * \t\t\tfunction: {\r\n\t * \t\t\t\ttitle: (node) => {\r\n\t * \t\t\t\t\treturn viz.nodeToHtml(node, undefined);\r\n\t * \t\t\t\t}\r\n\t * \t\t\t},\r\n\t * \t\t}\r\n\t * \t}\r\n\t * }\r\n\t * ```\r\n\t */\r\n\tlabels?: {\r\n\t\t[label: string]: LabelConfig,\r\n\t\t[NEOVIS_DEFAULT_CONFIG]?: LabelConfig\r\n\t};\r\n\t/**\r\n\t * @example\r\n\t * ``` js\r\n\t * {\r\n\t *      INTERACTS: {\r\n\t *  \t    value: 'weight',\r\n\t *  \t    [Neovis.NEOVIS_ADVANCED_CONFIG]: {\r\n\t *  \t    \tfunction: {\r\n\t *  \t    \t\ttitle: (edge) => {\r\n\t *  \t    \t\t\treturn viz.nodeToHtml(edge, undefined);\r\n\t *  \t    \t\t}\r\n\t *  \t    \t},\r\n\t *  \t    }\r\n\t *      }\r\n\t * }\r\n\t * ```\r\n\t */\r\n\trelationships?: {\r\n\t\t[relationship: string]: RelationshipConfig,\r\n\t\t[NEOVIS_DEFAULT_CONFIG]?: RelationshipConfig\r\n\t};\r\n}\r\n\r\nexport type NonFlatLabelConfig = NonFlatNeoVisAdvanceConfig<VisNetwork.Node, Neo4jTypes.Node<number>>;\r\nexport type NonFlatRelationsipConfig = NonFlatNeoVisAdvanceConfig<VisNetwork.Edge, Neo4jTypes.Relationship<number>>;\r\n\r\n/**\r\n * non flat version of the configuration (without Symbols)\r\n * look at the normal config for more information\r\n *\r\n * @example\r\n * ```js\r\n * {\r\n *      containerId: 'viz',\r\n *      nonFlat: true,\r\n *      neo4j: {\r\n *      \tserverUrl: 'bolt://localhost:7687',\r\n *      \tserverUser: 'neo4j',\r\n *      \tserverPassword: 'gland-presentation-worry'\r\n *      },\r\n *      visConfig: {\r\n *      \tnodes: {\r\n *      \t\tshape: 'square'\r\n *      \t},\r\n *      \tedges: {\r\n *      \t\tarrows: {\r\n *      \t\t\tto: {enabled: true}\r\n *      \t\t}\r\n *      \t},\r\n *      },\r\n *      labels: {\r\n *      \tCharacter: {\r\n *      \t\tproperty: {\r\n *      \t\t    label: 'pagerank',\r\n *      \t\t    group: 'community'\r\n *      \t    }\r\n *      \t\tcypher: {\r\n *      \t\t\tvalue: \"MATCH (n) WHERE id(n) = $id RETURN n.size\"\r\n *      \t\t},\r\n *      \t\tfunction: {\r\n *      \t\t\ttitle: (node) => {\r\n *      \t\t\t\treturn viz.nodeToHtml(node, undefined);\r\n *      \t\t\t}\r\n *      \t\t}\r\n *      \t}\r\n *      },\r\n *      relationships: {\r\n *      \tINTERACTS: {\r\n *              property: {\r\n *      \t\t    value: 'weight'\r\n *      \t    }\r\n *      \t\tfunction: {\r\n *      \t\t\ttitle: (edge) => {\r\n *      \t\t\t\treturn viz.nodeToHtml(edge, undefined);\r\n *      \t\t\t}\r\n *      \t\t}\r\n *      \t}\r\n *      },\r\n *      initialCypher: 'MATCH (n)-[r]->(m) RETURN n,r,m'\r\n * }\r\n * ```\r\n */\r\nexport interface NonFlatNeovisConfig extends BaseNeovisConfig {\r\n\tnonFlat: true;\r\n\tdefaultLabelConfig?: NonFlatLabelConfig;\r\n\tdefaultRelationshipsConfig?: NonFlatRelationsipConfig;\r\n\tlabels?: Record<string, NonFlatLabelConfig>;\r\n\trelationships?: Record<string, NonFlatRelationsipConfig>;\r\n}\r\n\r\n/**\r\n * A network node with raw neo4j node\r\n */\r\nexport interface Node extends VisNetwork.Node {\r\n\t/**\r\n\t * @link https://neo4j.com/docs/api/javascript-driver/current/class/src/graph-types.js~Node.html\r\n\t */\r\n\tid: number;\r\n\traw: Neo4jTypes.Node<NumberOrInteger>;\r\n}\r\n\r\n/**\r\n * A network edge with raw neo4j relationship\r\n */\r\nexport interface Edge extends VisNetwork.Edge {\r\n\t/**\r\n\t * https://neo4j.com/docs/api/javascript-driver/current/class/src/graph-types.js~Relationship.html\r\n\t */\r\n\tid: number;\r\n\traw: Neo4jTypes.Relationship<NumberOrInteger>;\r\n}","'use strict';\r\n\r\nimport * as Neo4jTypes from 'neo4j-driver';\r\nimport Neo4j from 'neo4j-driver';\r\nimport * as Neo4jCore from 'neo4j-driver-core';\r\nimport { isInt, isNode, isPath, isRelationship } from 'neo4j-driver-core';\r\nimport * as vis from 'vis-network/standalone';\r\nimport { defaults } from './defaults';\r\nimport { EventController, EventFunctionTypes, NeoVisEvents } from './events';\r\nimport deepmerge from 'deepmerge';\r\nimport type * as VisNetwork from 'vis-network';\r\nimport {\r\n\tCypher,\r\n\tEdge,\r\n\tLabelConfig,\r\n\tNeo4jConfig,\r\n\tNEOVIS_ADVANCED_CONFIG,\r\n\tNEOVIS_DEFAULT_CONFIG,\r\n\tNeovisConfig,\r\n\tNeovisDataConfig,\r\n\tNode,\r\n\tNonFlatLabelConfig,\r\n\tNonFlatNeoVisAdvanceConfig,\r\n\tNonFlatNeovisConfig,\r\n\tNonFlatRelationsipConfig,\r\n\tNumberOrInteger,\r\n\tRecursiveMapTo,\r\n\tRecursiveMapToFunction,\r\n\tRelationshipConfig\r\n} from './types';\r\n\r\nexport * from './events';\r\nexport * from './types';\r\n\r\nfunction toNeo4jInt({ low, high }: { high: number, low: number }): Neo4jTypes.Integer {\r\n\treturn new Neo4j.types.Integer(low, high);\r\n}\r\n\r\ninterface FakeIdentity {\r\n\thigh: number,\r\n\tlow: number\r\n}\r\ninterface FakeNode {\r\n\tlabels: string[];\r\n\tidentity: FakeIdentity;\r\n\tproperties: Record<string, FakeIdentity | any>;\r\n}\r\n\r\ninterface FakeRelationship {\r\n\tidentity: FakeIdentity;\r\n\ttype: string;\r\n\tstart: FakeIdentity;\r\n\tend: FakeIdentity;\r\n\tproperties: Record<string, FakeIdentity | any>;\r\n}\r\n\r\ninterface FakePathSegments {\r\n\tstart: FakeNode;\r\n\tend: FakeNode;\r\n\trelationship: FakeRelationship\r\n}\r\n\r\ninterface FakePath {\r\n\tstart: FakeNode;\r\n\tend: FakeNode;\r\n\tsegments: FakePathSegments[];\r\n}\r\n\r\nfunction isFakeInteger(property: FakeIdentity | any): property is FakeIdentity {\r\n\treturn typeof property === 'object' && 'high' in property && 'low' in property && Object.keys(property).length == 2;\r\n}\r\n\r\nfunction properyMapWithIdentity(properties: Record<string, FakeIdentity | any>): Record<string, Neo4jTypes.Integer | any> {\r\n\treturn Object.entries(properties).reduce((ret, [key, value]) => {\r\n\t\tif(isFakeInteger(value)) {\r\n\t\t\tret[key] = toNeo4jInt(value);\r\n\t\t} else if(Array.isArray(value)) {\r\n\t\t\tret[key] = value.map(va => isFakeInteger(va) ? toNeo4jInt(va) : va);\r\n\t\t} else {\r\n\t\t\tret[key] = value;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}, {});\r\n}\r\n\r\nfunction dumbToNeo4j(field: FakeNode | FakeRelationship | FakePath): Neo4jTypes.Node | Neo4jTypes.Relationship | Neo4jTypes.Path {\r\n\tif ('labels' in field) {\r\n\t\treturn new Neo4j.types.Node(toNeo4jInt(field.identity), field.labels, properyMapWithIdentity(field.properties));\r\n\t} else if ('type' in field) {\r\n\t\treturn new Neo4j.types.Relationship(toNeo4jInt(field.identity), toNeo4jInt(field.start), toNeo4jInt(field.end), field.type, properyMapWithIdentity(field.properties));\r\n\t} else if ('segments' in field) {\t\r\n\t\treturn new Neo4j.types.Path(\r\n\t\t\tnew Neo4j.types.Node(toNeo4jInt(field.start.identity), field.start.labels, properyMapWithIdentity(field.start.properties)),\r\n\t\t\tnew Neo4j.types.Node(toNeo4jInt(field.end.identity), field.end.labels, properyMapWithIdentity(field.end.properties)),\r\n\t\t\tfield.segments.map(segment => new Neo4j.types.PathSegment(\r\n\t\t\t\tnew Neo4j.types.Node(toNeo4jInt(segment.start.identity), segment.start.labels, properyMapWithIdentity(segment.start.properties)),\r\n\t\t\t\tnew Neo4j.types.Relationship(toNeo4jInt(segment.relationship.identity), toNeo4jInt(segment.relationship.start), toNeo4jInt(segment.relationship.end), segment.relationship.type, properyMapWithIdentity(segment.relationship.properties)),\r\n\t\t\t\tnew Neo4j.types.Node(toNeo4jInt(segment.end.identity), segment.end.labels, properyMapWithIdentity(segment.end.properties))\r\n\t\t\t))\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction isNeo4jDriver(neo4jConfig: Neo4jTypes.Driver | Neo4jConfig): neo4jConfig is Neo4jTypes.Driver {\r\n\treturn neo4jConfig instanceof Neo4j.driver;\r\n}\r\nfunction _propertyToHtml<T extends { toString: () => string }>(key: string, value: T | T[]): string {\r\n\tif (Array.isArray(value) && value.length > 1) {\r\n\t\tlet out = `<strong>${key}:</strong><br /><ul>`;\r\n\t\tfor (const val of value) {\r\n\t\t\tout += `<li>${val}</li>`;\r\n\t\t}\r\n\t\treturn out + '</ul>';\r\n\t}\r\n\treturn `<strong>${key}:</strong> ${value}<br>`;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction _retrieveProperty<T>(prop: string, obj: any): T {\r\n\tif (typeof obj?.properties === 'object') {\r\n\t\treturn isInt(obj.properties[prop]) ? obj.properties[prop].toInt() : obj.properties[prop];\r\n\t}\r\n\tthrow new Error('Neo4j object is not properly constructed');\r\n}\r\n\r\n/**\r\n * create html display of the node\r\n * @param neo4jObject node to create html from\r\n * @param titleProperties which properties to map\r\n */\r\nexport function objectToTitleHtml(neo4jObject: Neo4jTypes.Node<NumberOrInteger> | Neo4jTypes.Relationship<NumberOrInteger>, titleProperties: string[]): HTMLDivElement {\r\n\tlet titleString = '';\r\n\tif (!titleProperties) {\r\n\t\ttitleProperties = Object.keys(neo4jObject.properties);\r\n\t}\r\n\tfor (const key of titleProperties) {\r\n\t\tconst propVal = _retrieveProperty(key, neo4jObject);\r\n\t\tif (propVal) {\r\n\t\t\ttitleString += _propertyToHtml(key, propVal);\r\n\t\t}\r\n\t}\r\n\tconst title = document.createElement('div');\r\n\ttitle.innerHTML = titleString;\r\n\treturn title;\r\n}\r\n\r\n/**\r\n * create string display of the node\r\n * @param neo4jObject node to create title string from\r\n * @param titleProperties which properties to map\r\n */\r\nexport function objectToTitleString(neo4jObject: Neo4jTypes.Node<NumberOrInteger> | Neo4jTypes.Relationship<NumberOrInteger>, titleProperties: string[]): string {\r\n\tlet title = '';\r\n\tif (!titleProperties) {\r\n\t\ttitleProperties = Object.keys(neo4jObject.properties);\r\n\t}\r\n\tfor (const key of titleProperties) {\r\n\t\tconst propVal = _retrieveProperty(key, neo4jObject);\r\n\t\tif (propVal) {\r\n\t\t\ttitle += `${key}: ${propVal}\\n`;\r\n\t\t}\r\n\t}\r\n\treturn title;\r\n}\r\n\r\nexport class NeoVis {\r\n\tstatic NEOVIS_DEFAULT_CONFIG = NEOVIS_DEFAULT_CONFIG;\r\n\tstatic NEOVIS_ADVANCED_CONFIG = NEOVIS_ADVANCED_CONFIG;\r\n\tstatic objectToTitleHtml = objectToTitleHtml;\r\n\tstatic objectToTitleString = objectToTitleString;\r\n\t#data = {\r\n\t\tnodes: new vis.DataSet<Node>(),\r\n\t\tedges: new vis.DataSet<Edge>()\r\n\t};\r\n\t#network: VisNetwork.Network = null;\r\n\t#events = new EventController();\r\n\t#config: NeovisConfig | NonFlatNeovisConfig;\r\n\t#driver: Neo4jTypes.Driver;\r\n\t#database: string;\r\n\t#query: Cypher;\r\n\t#container: HTMLElement;\r\n\r\n\t/**\r\n\t * All view nodes as DataSet\r\n\t * @link https://visjs.github.io/vis-data/data/dataset.html\r\n\t */\r\n\tget nodes(): VisNetwork.DataSet<Node> {\r\n\t\treturn this.#data.nodes;\r\n\t}\r\n\r\n\t/**\r\n\t * All view edges as DataSet\r\n\t * @link https://visjs.github.io/vis-data/data/dataset.html\r\n\t */\r\n\tget edges(): VisNetwork.DataSet<Edge> {\r\n\t\treturn this.#data.edges;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore for test purposes only\r\n\t */\r\n\tget _config(): NeovisConfig | NonFlatNeovisConfig {\r\n\t\treturn this.#config;\r\n\t}\r\n\r\n\t/**\r\n\t * The vis network object\r\n\t * @link https://visjs.github.io/vis-network/docs/network/#methods\r\n\t */\r\n\tget network(): VisNetwork.Network | undefined {\r\n\t\treturn this.#network;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t * @param {object} config - configures the visualization and Neo4j server connection\r\n\t */\r\n\tconstructor(config: NeovisConfig | NonFlatNeovisConfig) {\r\n\t\tthis.#init(config);\r\n\r\n\t\tthis.#consoleLog(config);\r\n\t\tthis.#consoleLog(defaults);\r\n\t}\r\n\r\n\t#consoleLog(message: object | string, level = 'log'): void {\r\n\t\tif (level !== 'log' || this.#config.consoleDebug) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole[level](message);\r\n\t\t}\r\n\t}\r\n\r\n\t#init(config: NeovisConfig | NonFlatNeovisConfig): void {\r\n\t\tlet defaultLabelConfig: NonFlatLabelConfig | LabelConfig;\r\n\t\tlet defaultRelationshipConfig: NonFlatRelationsipConfig | RelationshipConfig;\r\n\t\tif (config.nonFlat && config.defaultLabelConfig) {\r\n\t\t\tdefaultLabelConfig = config.defaultLabelConfig;\r\n\t\t\tif (defaultLabelConfig[NEOVIS_ADVANCED_CONFIG]) {\r\n\t\t\t\tthrow new Error('non flat config can\\'t use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look');\r\n\t\t\t}\r\n\t\t\tdefaultRelationshipConfig = config.defaultRelationshipsConfig;\r\n\t\t\tif (defaultRelationshipConfig[NEOVIS_ADVANCED_CONFIG]) {\r\n\t\t\t\tthrow new Error('non flat config can\\'t use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdefaultLabelConfig = (config as NeovisConfig).labels?.[NEOVIS_DEFAULT_CONFIG];\r\n\t\t\tdefaultRelationshipConfig = (config as NeovisConfig).relationships?.[NEOVIS_DEFAULT_CONFIG];\r\n\t\t}\r\n\t\tif (defaultLabelConfig) {\r\n\t\t\tfor (const key of Object.keys(config.labels)) {\r\n\t\t\t\t// getting out of my for not changing the original config object\r\n\t\t\t\tif (config.nonFlat) {\r\n\t\t\t\t\t(config as NonFlatNeovisConfig) = {\r\n\t\t\t\t\t\t...config as NonFlatNeovisConfig,\r\n\t\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\t\t...config.labels as Record<string, NonFlatLabelConfig>,\r\n\t\t\t\t\t\t\t[key]: deepmerge(defaultLabelConfig as NonFlatLabelConfig, config.labels?.[key] as NonFlatLabelConfig)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\t(config as NeovisConfig) = {\r\n\t\t\t\t\t\t...config as NeovisConfig,\r\n\t\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\t\t...config.labels as Record<string, LabelConfig>,\r\n\t\t\t\t\t\t\t[key]: {\r\n\t\t\t\t\t\t\t\t...deepmerge(defaultLabelConfig as LabelConfig, config.labels?.[key] as LabelConfig),\r\n\t\t\t\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: deepmerge((defaultLabelConfig as LabelConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}, (config.labels?.[key] as LabelConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (defaultRelationshipConfig) {\r\n\t\t\tfor (const key of Object.keys(config.relationships)) {\r\n\t\t\t\t// getting out of my for not changing the original config object\r\n\t\t\t\tif (config.nonFlat) {\r\n\t\t\t\t\t(config as NonFlatNeovisConfig) = {\r\n\t\t\t\t\t\t...config as NonFlatNeovisConfig,\r\n\t\t\t\t\t\trelationships: {\r\n\t\t\t\t\t\t\t...config.relationships as Record<string, NonFlatRelationsipConfig>,\r\n\t\t\t\t\t\t\t[key]: deepmerge(defaultRelationshipConfig as NonFlatRelationsipConfig, config.relationships?.[key] as NonFlatRelationsipConfig)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\t(config as NeovisConfig) = {\r\n\t\t\t\t\t\t...config as NeovisConfig,\r\n\t\t\t\t\t\trelationships: {\r\n\t\t\t\t\t\t\t...config.relationships as Record<string, RelationshipConfig>,\r\n\t\t\t\t\t\t\t[key]: {\r\n\t\t\t\t\t\t\t\t...deepmerge(defaultRelationshipConfig as RelationshipConfig, config.relationships?.[key] as RelationshipConfig),\r\n\t\t\t\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: deepmerge((defaultRelationshipConfig as RelationshipConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}, (config.relationships?.[key] as RelationshipConfig)[NEOVIS_ADVANCED_CONFIG] ?? {}),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#config = config;\r\n\t\tif (!config.dataFunction) {\r\n\t\t\tthis.#driver = isNeo4jDriver(config.neo4j) ? config.neo4j : Neo4j.driver(\r\n\t\t\t\tconfig.neo4j?.serverUrl ?? defaults.neo4j.neo4jUri,\r\n\t\t\t\tNeo4j.auth.basic(\r\n\t\t\t\t\tconfig.neo4j?.serverUser ?? defaults.neo4j.neo4jUser,\r\n\t\t\t\t\tconfig.neo4j?.serverPassword ?? defaults.neo4j.neo4jPassword\r\n\t\t\t\t),\r\n\t\t\t\tdeepmerge(defaults.neo4j.driverConfig, config.neo4j?.driverConfig ?? {})\r\n\t\t\t);\r\n\r\n\t\t\tthis.#database = config.serverDatabase;\r\n\t\t\tthis.#query = config.initialCypher ?? defaults.neo4j.initialQuery;\r\n\t\t}\r\n\t\tthis.#container = document.getElementById(config.containerId);\r\n\t\tthis.#config.groupAsLabel = config.groupAsLabel ?? defaults.neo4j.groupAsLabel;\r\n\t}\r\n\r\n\tasync #runCypher<T>(cypher: Cypher, id: number): Promise<T | T[]> {\r\n\t\tconst session = this.#driver.session(this.#database && { database: this.#database });\r\n\t\tconst results: T[] = [];\r\n\r\n\t\ttry {\r\n\t\t\tconst result = await session.readTransaction(tx => tx.run(cypher, { id }));\r\n\t\t\tfor (const record of result.records) {\r\n\t\t\t\trecord.forEach((v) => {\r\n\t\t\t\t\tresults.push(v);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tawait session.close();\r\n\t\t}\r\n\r\n\t\tif (results.length === 0) {\r\n\t\t\treturn undefined;\r\n\t\t} else if (results.length === 1) {\r\n\t\t\treturn results.pop();\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\t#runFunction<VIS_TYPE, NEO_TYPE>(func: (neoObj: NEO_TYPE) => VIS_TYPE | Promise<VIS_TYPE>, node: NEO_TYPE): Promise<VIS_TYPE> | VIS_TYPE {\r\n\t\tif (typeof func === 'function') {\r\n\t\t\treturn func(node);\r\n\t\t}\r\n\t\tthrow new Error('Function type property field must be a function');\r\n\t}\r\n\r\n\t#buildStaticObject<VIS_TYPE>(staticConfig: VIS_TYPE, object: VIS_TYPE): void {\r\n\t\tif (staticConfig && typeof staticConfig === 'object') {\r\n\t\t\tfor (const prop of Object.keys(staticConfig) as (keyof VIS_TYPE)[]) {\r\n\t\t\t\tconst value = staticConfig[prop];\r\n\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\tif (!object[prop]) {\r\n\t\t\t\t\t\tobject[prop as string] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.#buildStaticObject(value, object[prop] as VIS_TYPE[keyof VIS_TYPE] & object);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobject[prop] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t#buildPropertyNameObject<VIS_TYPE, NEO_TYPE>(propertyNameConfig: RecursiveMapTo<VIS_TYPE, string>, object: VIS_TYPE, neo4jObj: NEO_TYPE): void {\r\n\t\tif (propertyNameConfig && typeof propertyNameConfig === 'object') {\r\n\t\t\tfor (const prop of Object.keys(propertyNameConfig) as (keyof VIS_TYPE)[]) {\r\n\t\t\t\tconst property = propertyNameConfig[prop];\r\n\t\t\t\tif (typeof property === 'object') {\r\n\t\t\t\t\tif (!object[prop]) {\r\n\t\t\t\t\t\tobject[prop as string] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.#buildPropertyNameObject(property as RecursiveMapTo<VIS_TYPE[keyof VIS_TYPE], string>, object[prop], neo4jObj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst value = propertyNameConfig[prop];\r\n\t\t\t\t\tobject[prop] = _retrieveProperty(value as string, neo4jObj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t*#buildCypherObject<VIS_TYPE>(cypherConfig: RecursiveMapTo<VIS_TYPE, Cypher>, object: VIS_TYPE, id: number): Generator<Promise<void>> {\r\n\t\tif (cypherConfig && typeof cypherConfig === 'object') {\r\n\t\t\tfor (const prop of Object.keys(cypherConfig) as (keyof VIS_TYPE)[]) {\r\n\t\t\t\tconst value = cypherConfig[prop];\r\n\t\t\t\tif (value && typeof value === 'object') {\r\n\t\t\t\t\tif (!object[prop]) {\r\n\t\t\t\t\t\tobject[prop as string] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tyield* this.#buildCypherObject(value as RecursiveMapTo<VIS_TYPE[keyof VIS_TYPE], Cypher>, object[prop], id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst promise = this.#runCypher(value as string, id) as Promise<VIS_TYPE[keyof VIS_TYPE]>;\r\n\t\t\t\t\tyield Promise.resolve(promise).then(value => { object[prop] = value; }) as Promise<void>;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t*#buildFunctionObject<VIS_TYPE, NEO_TYPE>(functionConfig: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>, object: VIS_TYPE, neo4jObj: NEO_TYPE): Generator<Promise<void>> {\r\n\t\tif (functionConfig && typeof functionConfig === 'object') {\r\n\t\t\tfor (const prop of Object.keys(functionConfig) as (keyof VIS_TYPE)[]) {\r\n\t\t\t\tconst func = functionConfig[prop];\r\n\t\t\t\tif (func && typeof func === 'object') {\r\n\t\t\t\t\tif (!object[prop]) {\r\n\t\t\t\t\t\tobject[prop as string] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tyield* this.#buildFunctionObject(func as RecursiveMapToFunction<VIS_TYPE[keyof VIS_TYPE], NEO_TYPE>, object[prop], neo4jObj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst promise = this.#runFunction(func as (neo: NEO_TYPE) => VIS_TYPE[keyof VIS_TYPE], neo4jObj);\r\n\t\t\t\t\tyield Promise.resolve(promise).then(value => { object[prop] = value; }) as Promise<void>;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync #buildVisObject<VIS_TYPE, NEO_TYPE>(\r\n\t\tconfig: NeovisDataConfig<VIS_TYPE, NEO_TYPE> | NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE>, baseObject: VIS_TYPE, neo4jObject: NEO_TYPE, id: number\r\n\t): Promise<void> {\r\n\t\tif (!config) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet staticConfig: VIS_TYPE;\r\n\t\tlet cypherConfig: RecursiveMapTo<VIS_TYPE, Cypher>;\r\n\t\tlet propertyConfig: RecursiveMapTo<VIS_TYPE, string>;\r\n\t\tlet functionConfig: RecursiveMapToFunction<VIS_TYPE, NEO_TYPE>;\r\n\r\n\t\tif (this.#config.nonFlat) {\r\n\t\t\tif (config[NEOVIS_ADVANCED_CONFIG] !== undefined) {\r\n\t\t\t\tthrow new Error('Advanced config and non flat config should not be together');\r\n\t\t\t}\r\n\t\t\tconfig = config as NonFlatNeoVisAdvanceConfig<VIS_TYPE, NEO_TYPE>;\r\n\t\t\tstaticConfig = config.static;\r\n\t\t\tcypherConfig = config.cypher;\r\n\t\t\tpropertyConfig = config.property;\r\n\t\t\tfunctionConfig = config.function;\r\n\t\t} else {\r\n\t\t\tconfig = config as NeovisDataConfig<VIS_TYPE, NEO_TYPE>;\r\n\t\t\tconst advancedConfig = config[NEOVIS_ADVANCED_CONFIG];\r\n\t\t\tpropertyConfig = config;\r\n\t\t\tif (advancedConfig !== undefined && typeof advancedConfig != 'object') {\r\n\t\t\t\tthrow new Error('Advanced config should be an object. See documentation for details.');\r\n\t\t\t}\r\n\t\t\tcypherConfig = advancedConfig?.cypher;\r\n\t\t\tstaticConfig = advancedConfig?.static;\r\n\t\t\tfunctionConfig = advancedConfig?.function;\r\n\t\t}\r\n\t\tthis.#buildPropertyNameObject(propertyConfig, baseObject, neo4jObject);\r\n\t\tthis.#buildStaticObject(staticConfig, baseObject);\r\n\t\tawait Promise.all(this.#buildCypherObject(cypherConfig, baseObject, id));\r\n\t\tawait Promise.all(this.#buildFunctionObject(functionConfig, baseObject, neo4jObject));\r\n\t}\r\n\r\n\t/**\r\n\t * Build node object for vis from a neo4j Node\r\n\t * @param neo4jNode\r\n\t * @returns {{}}\r\n\t */\r\n\tasync #buildNodeVisObject(neo4jNode: Neo4jTypes.Node<NumberOrInteger>): Promise<Node> {\r\n\t\tconst node: Partial<Node> = {};\r\n\t\tconst label: string = neo4jNode.labels[0];\r\n\r\n\t\tconst labelConfig: LabelConfig | NonFlatLabelConfig = this.#config?.labels?.[label] ?? (this.#config as NonFlatNeovisConfig)?.defaultLabelConfig ??\r\n\t\t\t(this.#config as NeovisConfig)?.labels?.[NEOVIS_DEFAULT_CONFIG];\r\n\r\n\t\tnode.id = isInt(neo4jNode.identity) ? (neo4jNode.identity as Neo4jTypes.Integer).toInt() : neo4jNode.identity as number;\r\n\t\tnode.raw = neo4jNode;\r\n\t\tif (this.#config.groupAsLabel) {\r\n\t\t\tnode.group = label;\r\n\t\t}\r\n\r\n\t\tawait this.#buildVisObject(labelConfig, node as Node, neo4jNode, node.id);\r\n\r\n\t\treturn node as Node;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Build edge object for vis from a neo4j Relationship\r\n\t * @param r\r\n\t * @returns {{}}\r\n\t */\r\n\tasync #buildEdgeVisObject(r: Neo4jTypes.Relationship<NumberOrInteger>): Promise<Edge> {\r\n\t\tconst relationshipConfig = this.#config?.relationships?.[r.type] ?? (this.#config as NonFlatNeovisConfig).defaultRelationshipsConfig ??\r\n\t\t\t(this.#config as NeovisConfig)?.relationships?.[NEOVIS_DEFAULT_CONFIG];\r\n\r\n\t\tconst edge: Partial<Edge> = {};\r\n\t\tedge.id = isInt(r.identity) ? (r.identity as Neo4jTypes.Integer).toInt() : r.identity as number;\r\n\t\tedge.from = isInt(r.start) ? (r.start as Neo4jTypes.Integer).toInt() : r.start as number;\r\n\t\tedge.to = isInt(r.end) ? (r.end as Neo4jTypes.Integer).toInt() : r.end as number;\r\n\t\tedge.raw = r;\r\n\r\n\t\tawait this.#buildVisObject(relationshipConfig, edge as Edge, r, edge.id);\r\n\r\n\t\treturn edge as Edge;\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the network\r\n\t */\r\n\trender(query?: Cypher, parameters?: any): void {\r\n\t\tif (this.#config.dataFunction) {\r\n\t\t\tthis.#runFunctionDataGetter(parameters);\r\n\t\t} else {\r\n\t\t\tthis.#runNeo4jDataGetter(query, parameters);\r\n\t\t}\r\n\t}\r\n\r\n\tasync #runFunctionDataGetter(parameters?: any) {\r\n\t\tlet recordCount = 0;\r\n\t\ttry {\r\n\t\t\tconst dataBuildPromises: Promise<unknown>[] = [];\r\n\t\t\tfor await (const record of await this.#config.dataFunction(parameters)) {\r\n\t\t\t\tdataBuildPromises.push(this.#createSingleRecord(record));\r\n\t\t\t\trecordCount++;\r\n\t\t\t}\r\n\t\t\tawait Promise.all(dataBuildPromises);\r\n\t\t} catch (error) {\r\n\t\t\tthis.#events.generateEvent(NeoVisEvents.ErrorEvent, { error });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#completeRun();\r\n\t\tthis.#events.generateEvent(NeoVisEvents.CompletionEvent, { recordCount });\r\n\t}\r\n\r\n\t#runNeo4jDataGetter(query?: Cypher, parameters?: any) {\r\n\t\t// connect to Neo4j instance\r\n\t\t// run query\r\n\t\tlet recordCount = 0;\r\n\t\tconst _query = query || this.#query;\r\n\t\tconst session = this.#driver.session(this.#database ? { database: this.#database } : undefined);\r\n\t\tconst dataBuildPromises: Promise<unknown>[] = [];\r\n\t\tsession.run(_query, parameters)\r\n\t\t\t.subscribe({\r\n\t\t\t\tonNext: (record) => {\r\n\t\t\t\t\trecordCount++;\r\n\t\t\t\t\tdataBuildPromises.push(this.#createSingleRecord(record));\r\n\t\t\t\t},\r\n\t\t\t\tonCompleted: async () => {\r\n\t\t\t\t\tawait Promise.all(dataBuildPromises);\r\n\t\t\t\t\tawait session.close();\r\n\r\n\t\t\t\t\tthis.#completeRun();\r\n\t\t\t\t\tthis.#events.generateEvent(NeoVisEvents.CompletionEvent, { recordCount });\r\n\t\t\t\t},\r\n\t\t\t\tonError: (error) => {\r\n\t\t\t\t\tthis.#consoleLog(error, 'error');\r\n\t\t\t\t\tthis.#events.generateEvent(NeoVisEvents.ErrorEvent, { error });\r\n\t\t\t\t}\r\n\t\t\t} as Neo4jCore.ResultObserver);\r\n\t}\r\n\r\n\tasync #createSingleRecord(record: Neo4jTypes.Record | Partial<Neo4jTypes.Record>) {\r\n\t\tif (!(record instanceof Neo4j.types.Record)) {\r\n\t\t\tconst fields: (FakeNode | FakePath | FakeRelationship)[] = (record as any)._fields;\r\n\t\t\trecord = new Neo4j.types.Record(record.keys, fields.map(dumbToNeo4j), (record as any)._fieldLookup);\r\n\t\t}\r\n\t\tthis.#consoleLog('CLASS NAME');\r\n\t\tthis.#consoleLog(record?.constructor.name);\r\n\t\tthis.#consoleLog(record);\r\n\r\n\t\tconst dataPromises = record.map(async (v: object) => {\r\n\t\t\tthis.#consoleLog('Constructor:');\r\n\t\t\tthis.#consoleLog(v?.constructor.name);\r\n\t\t\tif (isNode(v)) {\r\n\t\t\t\tconst node = await this.#buildNodeVisObject(v);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.#data.nodes.update(node);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.#consoleLog(e, 'error');\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (isRelationship(v)) {\r\n\t\t\t\tconst edge = await this.#buildEdgeVisObject(v);\r\n\t\t\t\tthis.#data.edges.update(edge);\r\n\r\n\t\t\t} else if (isPath(v)) {\r\n\t\t\t\tthis.#consoleLog('PATH');\r\n\t\t\t\tthis.#consoleLog(v);\r\n\t\t\t\tconst startNode = await this.#buildNodeVisObject(v.start);\r\n\t\t\t\tconst endNode = await this.#buildNodeVisObject(v.end);\r\n\r\n\t\t\t\tthis.#data.nodes.update(startNode);\r\n\t\t\t\tthis.#data.nodes.update(endNode);\r\n\r\n\t\t\t\tfor (const obj of v.segments) {\r\n\t\t\t\t\tthis.#data.nodes.update(await this.#buildNodeVisObject(obj.start));\r\n\t\t\t\t\tthis.#data.nodes.update(await this.#buildNodeVisObject(obj.end));\r\n\t\t\t\t\tthis.#data.edges.update(await this.#buildEdgeVisObject(obj.relationship));\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (Array.isArray(v)) {\r\n\t\t\t\tfor (const obj of v) {\r\n\t\t\t\t\tthis.#consoleLog('Array element constructor:');\r\n\t\t\t\t\tthis.#consoleLog(obj?.constructor.name);\r\n\t\t\t\t\tif (isNode(obj)) {\r\n\t\t\t\t\t\tconst node = await this.#buildNodeVisObject(obj);\r\n\t\t\t\t\t\tthis.#data.nodes.update(node);\r\n\r\n\t\t\t\t\t} else if (isRelationship(obj)) {\r\n\t\t\t\t\t\tconst edge = await this.#buildEdgeVisObject(obj);\r\n\r\n\t\t\t\t\t\tthis.#data.edges.update(edge);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn Promise.all(dataPromises);\r\n\t}\r\n\r\n\t#completeRun() {\r\n\t\tif (!this.#network) {\r\n\t\t\tconst options = deepmerge(defaults.visJs, this.#config.visConfig ?? {});\r\n\r\n\t\t\tconst container = this.#container;\r\n\r\n\t\t\tthis.#consoleLog(this.#data.nodes);\r\n\t\t\tthis.#consoleLog(this.#data.edges);\r\n\r\n\t\t\tthis.#network = new vis.Network(container, this.#data, options);\r\n\t\t}\r\n\t\tthis.#consoleLog('completed');\r\n\t\tsetTimeout(\r\n\t\t\t() => {\r\n\t\t\t\tthis.#network.stopSimulation();\r\n\t\t\t},\r\n\t\t\t10000\r\n\t\t);\r\n\r\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\r\n\t\tconst neoVis = this;\r\n\t\tthis.#network.on('click', function (this: VisNetwork.Network, params: { nodes: Node[], edges: Edge[], pointer: { DOM: VisNetwork.Position } }) {\r\n\t\t\tif (params.nodes.length > 0) {\r\n\t\t\t\tconst nodeId = this.getNodeAt(params.pointer.DOM) as number;\r\n\t\t\t\tneoVis.#events.generateEvent(NeoVisEvents.ClickNodeEvent, {\r\n\t\t\t\t\tnodeId,\r\n\t\t\t\t\tnode: neoVis.#data.nodes.get(nodeId)\r\n\t\t\t\t});\r\n\t\t\t} else if (params.edges.length > 0) {\r\n\t\t\t\tconst edgeId = this.getEdgeAt(params.pointer.DOM) as number;\r\n\t\t\t\tneoVis.#events.generateEvent(NeoVisEvents.ClickEdgeEvent, {\r\n\t\t\t\t\tedgeId,\r\n\t\t\t\t\tedge: neoVis.#data.edges.get(edgeId)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Clear the data for the visualization\r\n\t */\r\n\tclearNetwork(): void {\r\n\t\tthis.#data.nodes.clear();\r\n\t\tthis.#data.edges.clear();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @param {string} eventType Event type to be handled\r\n\t * @param {Function} handler Handler to manage the event\r\n\t */\r\n\tregisterOnEvent<T extends NeoVisEvents>(eventType: T, handler: EventFunctionTypes[T]): void {\r\n\t\tthis.#events.register(eventType, handler);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Reset the config object and reload data\r\n\t * @param config\r\n\t */\r\n\treinit(config: NeovisConfig | NonFlatNeovisConfig): void {\r\n\t\tthis.#init(config);\r\n\t\tthis.render();\r\n\t}\r\n\r\n\t/**\r\n\t * Clear the network and fetch live data form the server and reload the visualization\r\n\t */\r\n\treload(): void {\r\n\t\tthis.clearNetwork();\r\n\t\tthis.render();\r\n\t}\r\n\r\n\t/**\r\n\t * Stabilize the visualization\r\n\t */\r\n\tstabilize(): void {\r\n\t\tthis.#network.stopSimulation();\r\n\t\tthis.#consoleLog('Calling stopSimulation');\r\n\t}\r\n\r\n\t/**\r\n\t * Execute an arbitrary Cypher query and re-render the visualization\r\n\t * @param query\r\n\t */\r\n\trenderWithCypher(query: Cypher): void {\r\n\t\t// this._config.initialCypher = query;\r\n\t\tthis.clearNetwork();\r\n\t\tthis.#query = query;\r\n\t\tthis.render();\r\n\t}\r\n\r\n\t/**\r\n\t * Execute an arbitrary Cypher query and update the current visualization, retaning current nodes\r\n\t * This function will not change the original query given by renderWithCypher or the inital cypher.\r\n\t * @param query\r\n\t */\r\n\tupdateWithCypher(query: Cypher): void {\r\n\t\tthis.render(query);\r\n\t}\r\n}\r\n\r\n/**\r\n * @deprecated for migration only\r\n */\r\nexport interface OldLabelConfig {\r\n\tcaption?: string | ((node: Neo4jTypes.Node) => string);\r\n\tsize?: number;\r\n\tcommunity?: string;\r\n\tsizeCypher?: string;\r\n\timage?: string;\r\n\tfont?: string | VisNetwork.Font;\r\n\ttitle_properties?: string[];\r\n}\r\n\r\n/**\r\n * @deprecated for migration only\r\n */\r\nexport interface OldRelationshipConfig {\r\n\tthickness?: number;\r\n\tcaption?: boolean | string;\r\n}\r\n\r\n/**\r\n * @deprecated for migration only\r\n */\r\nexport interface OldNeoVisConfig {\r\n\tcontainer_id: string;\r\n\tserver_url: string;\r\n\tserver_user: string;\r\n\tserver_password: string;\r\n\tserver_database: string;\r\n\tlabels?: {\r\n\t\t[label: string]: OldLabelConfig,\r\n\t\t[NEOVIS_DEFAULT_CONFIG]?: OldLabelConfig\r\n\t};\r\n\trelationships?: {\r\n\t\t[relationship: string]: OldRelationshipConfig,\r\n\t\t[NEOVIS_DEFAULT_CONFIG]?: OldRelationshipConfig\r\n\t};\r\n\tarrows?: boolean;\r\n\thierarchical?: boolean;\r\n\thierarchical_sort_method?: 'hubsize' | 'directed';\r\n\tinitial_cypher?: string;\r\n\tconsole_debug?: boolean;\r\n\tencrypted?: 'ENCRYPTION_OFF' | 'ENCRYPTION_ON';\r\n\ttrust?: 'TRUST_ALL_CERTIFICATES' | 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES';\r\n}\r\n\r\n/**\r\n * @deprecated will be removed in the future\r\n * migrate old config to the new one\r\n * @param oldNeoVisConfig 1.0.0 config object\r\n */\r\nexport function migrateFromOldConfig(oldNeoVisConfig: OldNeoVisConfig): NeovisConfig {\r\n\treturn {\r\n\t\tcontainerId: oldNeoVisConfig.container_id,\r\n\t\tinitialCypher: oldNeoVisConfig.initial_cypher,\r\n\t\tconsoleDebug: oldNeoVisConfig.console_debug,\r\n\t\tserverDatabase: oldNeoVisConfig.server_database,\r\n\t\tneo4j: {\r\n\t\t\tserverUrl: oldNeoVisConfig.server_url,\r\n\t\t\tserverUser: oldNeoVisConfig.server_user,\r\n\t\t\tserverPassword: oldNeoVisConfig.server_password,\r\n\t\t\tdriverConfig: oldNeoVisConfig.encrypted || oldNeoVisConfig.trust ? {\r\n\t\t\t\tencrypted: oldNeoVisConfig.encrypted,\r\n\t\t\t\ttrust: oldNeoVisConfig.trust\r\n\t\t\t} : undefined\r\n\t\t},\r\n\t\tvisConfig: oldNeoVisConfig.arrows || oldNeoVisConfig.hierarchical ? {\r\n\t\t\tedges: oldNeoVisConfig.arrows ? {\r\n\t\t\t\tarrows: {\r\n\t\t\t\t\tto: {\r\n\t\t\t\t\t\tenabled: oldNeoVisConfig.arrows\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} : undefined,\r\n\t\t\tlayout: oldNeoVisConfig.hierarchical ? {\r\n\t\t\t\tenabled: oldNeoVisConfig.hierarchical,\r\n\t\t\t\tsortMethod: oldNeoVisConfig.hierarchical_sort_method\r\n\t\t\t} : undefined\r\n\t\t} : undefined,\r\n\t\tlabels: oldNeoVisConfig.labels ? (Object.entries(oldNeoVisConfig.labels) as [string | typeof NEOVIS_DEFAULT_CONFIG, OldLabelConfig][])\r\n\t\t\t.concat(oldNeoVisConfig.labels?.[NEOVIS_DEFAULT_CONFIG] ? [[NEOVIS_DEFAULT_CONFIG, oldNeoVisConfig.labels[NEOVIS_DEFAULT_CONFIG]]] : [])\r\n\t\t\t.reduce((newLabelsConfig, [label, oldLabelConfig]) => {\r\n\t\t\t\tnewLabelsConfig[label] = {\r\n\t\t\t\t\tlabel: typeof oldLabelConfig.caption !== 'function' ? oldLabelConfig.caption : undefined,\r\n\t\t\t\t\tvalue: oldLabelConfig.size,\r\n\t\t\t\t\tgroup: oldLabelConfig.community,\r\n\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: {\r\n\t\t\t\t\t\tcypher: oldLabelConfig.sizeCypher ? {\r\n\t\t\t\t\t\t\tvalue: oldLabelConfig.sizeCypher\r\n\t\t\t\t\t\t} : undefined,\r\n\t\t\t\t\t\tfunction: deepmerge({\r\n\t\t\t\t\t\t\ttitle: (props) => objectToTitleHtml(props, oldLabelConfig.title_properties)\r\n\t\t\t\t\t\t}, typeof oldLabelConfig.caption === 'function' ? { label: oldLabelConfig.caption } : {}),\r\n\t\t\t\t\t\tstatic: {\r\n\t\t\t\t\t\t\tfont: oldLabelConfig.font,\r\n\t\t\t\t\t\t\tshape: oldLabelConfig.image ? 'image' : 'dot',\r\n\t\t\t\t\t\t\timage: oldLabelConfig.image\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn newLabelsConfig;\r\n\t\t\t}, {}) : undefined,\r\n\t\trelationships: oldNeoVisConfig.relationships ? (Object.entries(oldNeoVisConfig.relationships) as [string | typeof NEOVIS_DEFAULT_CONFIG, OldRelationshipConfig][])\r\n\t\t\t.concat(oldNeoVisConfig.relationships[NEOVIS_DEFAULT_CONFIG] ? [[NEOVIS_DEFAULT_CONFIG, oldNeoVisConfig.relationships[NEOVIS_DEFAULT_CONFIG]]] : [])\r\n\t\t\t.reduce((newLabelsConfig, [relationship, oldRelationshipsConfig]) => {\r\n\t\t\t\tnewLabelsConfig[relationship] = {\r\n\t\t\t\t\tvalue: oldRelationshipsConfig.thickness,\r\n\t\t\t\t\tlabel: typeof oldRelationshipsConfig.caption === 'string' ? oldRelationshipsConfig.caption : undefined,\r\n\t\t\t\t\t[NEOVIS_ADVANCED_CONFIG]: {\r\n\t\t\t\t\t\tfunction: {\r\n\t\t\t\t\t\t\ttitle: objectToTitleHtml\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn newLabelsConfig;\r\n\t\t\t}, {}) : undefined\r\n\t};\r\n}\r\n\r\nexport default NeoVis;\r\n"],"names":["root","factory","exports","module","require","define","amd","undefined","self","__WEBPACK_EXTERNAL_MODULE__783__","__WEBPACK_EXTERNAL_MODULE__642__","__WEBPACK_EXTERNAL_MODULE__779__","__WEBPACK_EXTERNAL_MODULE__995__","__WEBPACK_EXTERNAL_MODULE__83__","__WEBPACK_EXTERNAL_MODULE__209__","__WEBPACK_EXTERNAL_MODULE__852__","__WEBPACK_EXTERNAL_MODULE__820__","__WEBPACK_EXTERNAL_MODULE__848__","__WEBPACK_EXTERNAL_MODULE__317__","__WEBPACK_EXTERNAL_MODULE__483__","__WEBPACK_EXTERNAL_MODULE__349__","__WEBPACK_EXTERNAL_MODULE__723__","__WEBPACK_EXTERNAL_MODULE__270__","__WEBPACK_EXTERNAL_MODULE__519__","__WEBPACK_EXTERNAL_MODULE__949__","__WEBPACK_EXTERNAL_MODULE__55__","__WEBPACK_EXTERNAL_MODULE__365__","__WEBPACK_EXTERNAL_MODULE__613__","__WEBPACK_EXTERNAL_MODULE__581__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","defaults","neo4j","initialQuery","neo4jUri","neo4jUser","neo4jPassword","driverConfig","encrypted","trust","maxConnectionPoolSize","connectionAcquisitionTimeout","disableLosslessIntegers","groupAsLabel","visJs","nodes","font","size","strokeWidth","scaling","edges","arrows","to","enabled","length","layout","improvedLayout","hierarchical","sortMethod","physics","adaptiveTimestep","stabilization","iterations","fit","NeoVisEvents","EventController","constructor","_defineProperty","this","_handlers","CompletionEvent","ErrorEvent","ClickNodeEvent","ClickEdgeEvent","register","eventType","handler","Error","push","generateEvent","values","NEOVIS_DEFAULT_CONFIG","_Symbol","NEOVIS_ADVANCED_CONFIG","_classPrivateMethodInitSpec","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","toNeo4jInt","_ref","low","high","Neo4j","isFakeInteger","property","_Object$keys","properyMapWithIdentity","properties","_context","_reduceInstanceProperty","_Object$entries","ret","_ref2","_Array$isArray","_mapInstanceProperty","va","dumbToNeo4j","field","identity","labels","start","end","type","_context2","segments","segment","relationship","_propertyToHtml","out","val","_retrieveProperty","isInt","toInt","objectToTitleHtml","neo4jObject","titleProperties","titleString","propVal","title","document","createElement","innerHTML","objectToTitleString","_data","_WeakMap","_network","_events","_config","_driver","_database","_query2","_container","_consoleLog","_WeakSet","_init","_runCypher","_runFunction","_buildStaticObject","_buildPropertyNameObject","_buildCypherObject","_buildFunctionObject","_buildVisObject","_buildNodeVisObject","_buildEdgeVisObject","_runFunctionDataGetter","_runNeo4jDataGetter","_createSingleRecord","_completeRun","NeoVis","_classPrivateFieldGet","network","config","writable","vis","_init2","_consoleLog2","render","query","parameters","dataFunction","_runFunctionDataGetter2","_runNeo4jDataGetter2","clearNetwork","clear","registerOnEvent","reinit","reload","stabilize","stopSimulation","renderWithCypher","_classPrivateFieldSet","updateWithCypher","message","level","arguments","consoleDebug","console","defaultLabelConfig","defaultRelationshipConfig","nonFlat","defaultRelationshipsConfig","relationships","deepmerge","serverUrl","serverUser","serverPassword","serverDatabase","initialCypher","getElementById","containerId","_runCypher2","cypher","id","session","database","results","result","readTransaction","tx","run","record","records","_forEachInstanceProperty","v","close","pop","_runFunction2","func","node","_buildStaticObject2","staticConfig","object","_buildPropertyNameObject2","propertyNameConfig","neo4jObj","_buildCypherObject2","cypherConfig","promise","_Promise","then","_buildFunctionObject2","functionConfig","_buildVisObject2","baseObject","propertyConfig","static","function","advancedConfig","_buildNodeVisObject2","neo4jNode","label","labelConfig","raw","group","_buildEdgeVisObject2","relationshipConfig","edge","from","recordCount","dataBuildPromises","_createSingleRecord2","error","_completeRun2","_query","subscribe","onNext","onCompleted","async","onError","fields","_fields","_keysInstanceProperty","_fieldLookup","name","dataPromises","isNode","update","e","isRelationship","isPath","startNode","endNode","options","visConfig","container","_setTimeout","neoVis","on","params","nodeId","getNodeAt","pointer","DOM","edgeId","getEdgeAt","migrateFromOldConfig","oldNeoVisConfig","_context3","_context4","_context5","_context6","container_id","initial_cypher","console_debug","server_database","server_url","server_user","server_password","hierarchical_sort_method","_concatInstanceProperty","newLabelsConfig","_ref3","oldLabelConfig","caption","community","sizeCypher","props","title_properties","shape","image","_ref4","oldRelationshipsConfig","thickness"],"sourceRoot":""}