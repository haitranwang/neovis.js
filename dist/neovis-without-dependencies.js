!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/keys"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):"function"==typeof define&&define.amd?define(["@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/helpers/classPrivateFieldSet","@babel/runtime-corejs3/helpers/classPrivateFieldGet","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/instance/reduce","@babel/runtime-corejs3/core-js-stable/object/entries","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/weak-map","@babel/runtime-corejs3/core-js-stable/weak-set","@babel/runtime-corejs3/core-js-stable/instance/for-each","@babel/runtime-corejs3/core-js-stable/promise","@babel/runtime-corejs3/core-js-stable/instance/keys","@babel/runtime-corejs3/core-js-stable/set-timeout","neo4j-driver","neo4j-driver-core","vis-network/standalone","deepmerge","@babel/runtime-corejs3/core-js-stable/symbol"],t):"object"==typeof exports?exports.NeoVis=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/keys"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):e.NeoVis=t(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(self,((e,t,s,i,r,o,n,a,l,c,h,d,u,b,p,f,j,v,m,y)=>(()=>{"use strict";var w={852:e=>{e.exports=n},848:e=>{e.exports=l},349:e=>{e.exports=d},270:e=>{e.exports=b},820:e=>{e.exports=a},83:e=>{e.exports=r},209:e=>{e.exports=o},995:e=>{e.exports=i},723:e=>{e.exports=u},519:e=>{e.exports=p},581:e=>{e.exports=y},317:e=>{e.exports=c},483:e=>{e.exports=h},779:e=>{e.exports=s},642:e=>{e.exports=t},783:t=>{t.exports=e},613:e=>{e.exports=m},949:e=>{e.exports=f},55:e=>{e.exports=j},365:e=>{e.exports=v}},g={};function E(e){var t=g[e];if(void 0!==t)return t.exports;var s=g[e]={exports:{}};return w[e](s,s.exports,E),s.exports}E.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return E.d(t,{a:t}),t},E.d=(e,t)=>{for(var s in t)E.o(t,s)&&!E.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},E.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),E.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var C={};return(()=>{E.r(C),E.d(C,{EventController:()=>R,NEOVIS_ADVANCED_CONFIG:()=>G,NEOVIS_DEFAULT_CONFIG:()=>z,NeoVis:()=>ke,NeoVisEvents:()=>L,default:()=>ze,migrateFromOldConfig:()=>He,objectToTitleHtml:()=>te,objectToTitleString:()=>se});var e=E(783),t=E.n(e),s=E(642),i=E.n(s),r=E(779),o=E.n(r),n=E(995),a=E.n(n),l=E(83),c=E.n(l),h=E(209),d=E.n(h),u=E(852),b=E.n(u),p=E(820),f=E.n(p),j=E(848),v=E.n(j),m=E(317),y=E.n(m),w=E(483),g=E.n(w),N=E(349),q=E.n(N),k=E(723),_=E.n(k),I=E(270),x=E.n(I),A=E(519),T=E.n(A),S=E(949),F=E.n(S),O=E(55),P=E(365);const D={neo4j:{initialQuery:"MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;",neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",driverConfig:{encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES",maxConnectionPoolSize:100,connectionAcquisitionTimeout:1e4,disableLosslessIntegers:!0},groupAsLabel:!0},visJs:{nodes:{font:{size:26,strokeWidth:7},scaling:{}},edges:{arrows:{to:{enabled:!1}},length:200},layout:{improvedLayout:!1,hierarchical:{enabled:!1,sortMethod:"hubsize"}},physics:{adaptiveTimestep:!0,stabilization:{iterations:200,fit:!0}}}};let L=function(e){return e.CompletionEvent="completed",e.ClickNodeEvent="clickNode",e.ClickEdgeEvent="clickEdge",e.ErrorEvent="error",e}({});class R{constructor(){t()(this,"_handlers",void 0),this._handlers={[L.CompletionEvent]:[],[L.ErrorEvent]:[],[L.ClickNodeEvent]:[],[L.ClickEdgeEvent]:[]}}register(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);this._handlers[e].push(t)}generateEvent(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);for(const s of this._handlers[e])s(t)}}var U=E(613),V=E.n(U),M=E(581),H=E.n(M);const z=H()(),G=H()();function W(e,t){B(e,t),t.add(e)}function $(e,t,s){B(e,t),t.set(e,s)}function B(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function Q(e){let{low:t,high:s}=e;return new(F().types.Integer)(t,s)}function Y(e){return"object"==typeof e&&"high"in e&&"low"in e&&2==a()(e).length}function K(e){var t;return c()(t=d()(e)).call(t,((e,t)=>{let[s,i]=t;return Y(i)?e[s]=Q(i):b()(i)?e[s]=f()(i).call(i,(e=>Y(e)?Q(e):e)):e[s]=i,e}),{})}function X(e){return"labels"in e?new(F().types.Node)(Q(e.identity),e.labels,K(e.properties)):"type"in e?new(F().types.Relationship)(Q(e.identity),Q(e.start),Q(e.end),e.type,K(e.properties)):"segments"in e?new(F().types.Path)(new(F().types.Node)(Q(e.start.identity),e.start.labels,K(e.start.properties)),new(F().types.Node)(Q(e.end.identity),e.end.labels,K(e.end.properties)),f()(t=e.segments).call(t,(e=>new(F().types.PathSegment)(new(F().types.Node)(Q(e.start.identity),e.start.labels,K(e.start.properties)),new(F().types.Relationship)(Q(e.relationship.identity),Q(e.relationship.start),Q(e.relationship.end),e.relationship.type,K(e.relationship.properties)),new(F().types.Node)(Q(e.end.identity),e.end.labels,K(e.end.properties)))))):void 0;var t}function Z(e,t){if(b()(t)&&t.length>1){let s=`<strong>${e}:</strong><br /><ul>`;for(const e of t)s+=`<li>${e}</li>`;return s+"</ul>"}return`<strong>${e}:</strong> ${t}<br>`}function ee(e,t){if("object"==typeof t?.properties)return(0,O.isInt)(t.properties[e])?t.properties[e].toInt():t.properties[e];throw new Error("Neo4j object is not properly constructed")}function te(e,t){let s="";t||(t=a()(e.properties));for(const i of t){const t=ee(i,e);t&&(s+=Z(i,t))}const i=document.createElement("div");return i.innerHTML=s,i}function se(e,t){let s="";t||(t=a()(e.properties));for(const i of t){const t=ee(i,e);t&&(s+=`${i}: ${t}\n`)}return s}var ie=new(y()),re=new(y()),oe=new(y()),ne=new(y()),ae=new(y()),le=new(y()),ce=new(y()),he=new(y()),de=new(g()),ue=new(g()),be=new(g()),pe=new(g()),fe=new(g()),je=new(g()),ve=new(g()),me=new(g()),ye=new(g()),we=new(g()),ge=new(g()),Ee=new(g()),Ce=new(g()),Ne=new(g()),qe=new(g());class ke{get nodes(){return o()(this,ie).nodes}get edges(){return o()(this,ie).edges}get _config(){return o()(this,ne)}get network(){return o()(this,re)}constructor(e){W(this,qe),W(this,Ne),W(this,Ce),W(this,Ee),W(this,ge),W(this,we),W(this,ye),W(this,me),W(this,ve),W(this,je),W(this,fe),W(this,pe),W(this,be),W(this,ue),W(this,de),$(this,ie,{writable:!0,value:{nodes:new P.DataSet,edges:new P.DataSet}}),$(this,re,{writable:!0,value:null}),$(this,oe,{writable:!0,value:new R}),$(this,ne,{writable:!0,value:void 0}),$(this,ae,{writable:!0,value:void 0}),$(this,le,{writable:!0,value:void 0}),$(this,ce,{writable:!0,value:void 0}),$(this,he,{writable:!0,value:void 0}),J(this,ue,Ie).call(this,e),J(this,de,_e).call(this,e),J(this,de,_e).call(this,D)}render(e,t){o()(this,ne).dataFunction?J(this,Ee,Re).call(this,t):J(this,Ce,Ue).call(this,e,t)}clearNetwork(){o()(this,ie).nodes.clear(),o()(this,ie).edges.clear()}registerOnEvent(e,t){o()(this,oe).register(e,t)}reinit(e){J(this,ue,Ie).call(this,e),this.render()}reload(){this.clearNetwork(),this.render()}stabilize(){o()(this,re).stopSimulation(),J(this,de,_e).call(this,"Calling stopSimulation")}renderWithCypher(e){this.clearNetwork(),i()(this,ce,e),this.render()}updateWithCypher(e){this.render(e)}}function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";("log"!==t||o()(this,ne).consoleDebug)&&console[t](e)}function Ie(e){let t,s;if(e.nonFlat&&e.defaultLabelConfig){if(t=e.defaultLabelConfig,t[G])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look");if(s=e.defaultRelationshipsConfig,s[G])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look")}else t=e.labels?.[z],s=e.relationships?.[z];if(t)for(const s of a()(e.labels))e=e.nonFlat?{...e,labels:{...e.labels,[s]:V()(t,e.labels?.[s])}}:{...e,labels:{...e.labels,[s]:{...V()(t,e.labels?.[s]),[G]:V()(t[G]??{},(e.labels?.[s])[G]??{})}}};if(s)for(const t of a()(e.relationships))e=e.nonFlat?{...e,relationships:{...e.relationships,[t]:V()(s,e.relationships?.[t])}}:{...e,relationships:{...e.relationships,[t]:{...V()(s,e.relationships?.[t]),[G]:V()(s[G]??{},(e.relationships?.[t])[G]??{})}}};i()(this,ne,e),e.dataFunction||(i()(this,ae,e.neo4j instanceof F().driver?e.neo4j:F().driver(e.neo4j?.serverUrl??D.neo4j.neo4jUri,F().auth.basic(e.neo4j?.serverUser??D.neo4j.neo4jUser,e.neo4j?.serverPassword??D.neo4j.neo4jPassword),V()(D.neo4j.driverConfig,e.neo4j?.driverConfig??{}))),i()(this,le,e.serverDatabase),i()(this,ce,e.initialCypher??D.neo4j.initialQuery)),i()(this,he,document.getElementById(e.containerId)),o()(this,ne).groupAsLabel=e.groupAsLabel??D.neo4j.groupAsLabel}async function xe(e,t){const s=o()(this,ae).session(o()(this,le)&&{database:o()(this,le)}),i=[];try{const r=await s.readTransaction((s=>s.run(e,{id:t})));for(const e of r.records)q()(e).call(e,(e=>{i.push(e)}))}finally{await s.close()}if(0!==i.length)return 1===i.length?i.pop():i}function Ae(e,t){if("function"==typeof e)return e(t);throw new Error("Function type property field must be a function")}function Te(e,t){if(e&&"object"==typeof e)for(const s of a()(e)){const i=e[s];i&&"object"==typeof i?(t[s]||(t[s]={}),J(this,fe,Te).call(this,i,t[s])):t[s]=i}}function Se(e,t,s){if(e&&"object"==typeof e)for(const i of a()(e)){const r=e[i];if("object"==typeof r)t[i]||(t[i]={}),J(this,je,Se).call(this,r,t[i],s);else{const r=e[i];t[i]=ee(r,s)}}}function*Fe(e,t,s){if(e&&"object"==typeof e)for(const i of a()(e)){const r=e[i];if(r&&"object"==typeof r)t[i]||(t[i]={}),yield*J(this,ve,Fe).call(this,r,t[i],s);else{const e=J(this,be,xe).call(this,r,s);yield _().resolve(e).then((e=>{t[i]=e}))}}}function*Oe(e,t,s){if(e&&"object"==typeof e)for(const i of a()(e)){const r=e[i];if(r&&"object"==typeof r)t[i]||(t[i]={}),yield*J(this,me,Oe).call(this,r,t[i],s);else{const e=J(this,pe,Ae).call(this,r,s);yield _().resolve(e).then((e=>{t[i]=e}))}}}async function Pe(e,t,s,i){if(!e)return;let r,n,a,l;if(o()(this,ne).nonFlat){if(void 0!==e[G])throw new Error("Advanced config and non flat config should not be together");r=e.static,n=e.cypher,a=e.property,l=e.function}else{const t=e[G];if(a=e,void 0!==t&&"object"!=typeof t)throw new Error("Advanced config should be an object. See documentation for details.");n=t?.cypher,r=t?.static,l=t?.function}J(this,je,Se).call(this,a,t,s),J(this,fe,Te).call(this,r,t),await _().all(J(this,ve,Fe).call(this,n,t,i)),await _().all(J(this,me,Oe).call(this,l,t,s))}async function De(e){const t={},s=e.labels[0],i=o()(this,ne)?.labels?.[s]??o()(this,ne)?.defaultLabelConfig??o()(this,ne)?.labels?.[z];return t.id=(0,O.isInt)(e.identity)?e.identity.toInt():e.identity,t.raw=e,o()(this,ne).groupAsLabel&&(t.group=s),await J(this,ye,Pe).call(this,i,t,e,t.id),t}async function Le(e){const t=o()(this,ne)?.relationships?.[e.type]??o()(this,ne).defaultRelationshipsConfig??o()(this,ne)?.relationships?.[z],s={};return s.id=(0,O.isInt)(e.identity)?e.identity.toInt():e.identity,s.from=(0,O.isInt)(e.start)?e.start.toInt():e.start,s.to=(0,O.isInt)(e.end)?e.end.toInt():e.end,s.raw=e,await J(this,ye,Pe).call(this,t,s,e,s.id),s}async function Re(e){let t=0;try{const s=[];for await(const i of await o()(this,ne).dataFunction(e))s.push(J(this,Ne,Ve).call(this,i)),t++;await _().all(s)}catch(e){return void o()(this,oe).generateEvent(L.ErrorEvent,{error:e})}J(this,qe,Me).call(this),o()(this,oe).generateEvent(L.CompletionEvent,{recordCount:t})}function Ue(e,t){let s=0;const i=e||o()(this,ce),r=o()(this,ae).session(o()(this,le)?{database:o()(this,le)}:void 0),n=[];r.run(i,t).subscribe({onNext:e=>{s++,n.push(J(this,Ne,Ve).call(this,e))},onCompleted:async()=>{await _().all(n),await r.close(),J(this,qe,Me).call(this),o()(this,oe).generateEvent(L.CompletionEvent,{recordCount:s})},onError:e=>{J(this,de,_e).call(this,e,"error"),o()(this,oe).generateEvent(L.ErrorEvent,{error:e})}})}async function Ve(e){if(!(e instanceof F().types.Record)){const t=e._fields;e=new(F().types.Record)(x()(e),f()(t).call(t,X),e._fieldLookup)}J(this,de,_e).call(this,"CLASS NAME"),J(this,de,_e).call(this,e?.constructor.name),J(this,de,_e).call(this,e);const t=f()(e).call(e,(async e=>{if(J(this,de,_e).call(this,"Constructor:"),J(this,de,_e).call(this,e?.constructor.name),(0,O.isNode)(e)){const t=await J(this,we,De).call(this,e);try{o()(this,ie).nodes.update(t)}catch(e){J(this,de,_e).call(this,e,"error")}}else if((0,O.isRelationship)(e)){const t=await J(this,ge,Le).call(this,e);o()(this,ie).edges.update(t)}else if((0,O.isPath)(e)){J(this,de,_e).call(this,"PATH"),J(this,de,_e).call(this,e);const t=await J(this,we,De).call(this,e.start),s=await J(this,we,De).call(this,e.end);o()(this,ie).nodes.update(t),o()(this,ie).nodes.update(s);for(const t of e.segments)o()(this,ie).nodes.update(await J(this,we,De).call(this,t.start)),o()(this,ie).nodes.update(await J(this,we,De).call(this,t.end)),o()(this,ie).edges.update(await J(this,ge,Le).call(this,t.relationship))}else if(b()(e))for(const t of e)if(J(this,de,_e).call(this,"Array element constructor:"),J(this,de,_e).call(this,t?.constructor.name),(0,O.isNode)(t)){const e=await J(this,we,De).call(this,t);o()(this,ie).nodes.update(e)}else if((0,O.isRelationship)(t)){const e=await J(this,ge,Le).call(this,t);o()(this,ie).edges.update(e)}}));return _().all(t)}function Me(){if(!o()(this,re)){const e=V()(D.visJs,o()(this,ne).visConfig??{}),t=o()(this,he);J(this,de,_e).call(this,o()(this,ie).nodes),J(this,de,_e).call(this,o()(this,ie).edges),i()(this,re,new P.Network(t,o()(this,ie),e))}J(this,de,_e).call(this,"completed"),T()((()=>{o()(this,re).stopSimulation()}),1e4);const e=this;o()(this,re).on("click",(function(t){if(t.nodes.length>0){const s=this.getNodeAt(t.pointer.DOM);o()(e,oe).generateEvent(L.ClickNodeEvent,{nodeId:s,node:o()(e,ie).nodes.get(s)})}else if(t.edges.length>0){const s=this.getEdgeAt(t.pointer.DOM);o()(e,oe).generateEvent(L.ClickEdgeEvent,{edgeId:s,edge:o()(e,ie).edges.get(s)})}}))}function He(e){var t,s,i,r;return{containerId:e.container_id,initialCypher:e.initial_cypher,consoleDebug:e.console_debug,serverDatabase:e.server_database,neo4j:{serverUrl:e.server_url,serverUser:e.server_user,serverPassword:e.server_password,driverConfig:e.encrypted||e.trust?{encrypted:e.encrypted,trust:e.trust}:void 0},visConfig:e.arrows||e.hierarchical?{edges:e.arrows?{arrows:{to:{enabled:e.arrows}}}:void 0,layout:e.hierarchical?{enabled:e.hierarchical,sortMethod:e.hierarchical_sort_method}:void 0}:void 0,labels:e.labels?c()(t=v()(s=d()(e.labels)).call(s,e.labels?.[z]?[[z,e.labels[z]]]:[])).call(t,((e,t)=>{let[s,i]=t;return e[s]={label:"function"!=typeof i.caption?i.caption:void 0,value:i.size,group:i.community,[G]:{cypher:i.sizeCypher?{value:i.sizeCypher}:void 0,function:V()({title:e=>te(e,i.title_properties)},"function"==typeof i.caption?{label:i.caption}:{}),static:{font:i.font,shape:i.image?"image":"dot",image:i.image}}},e}),{}):void 0,relationships:e.relationships?c()(i=v()(r=d()(e.relationships)).call(r,e.relationships[z]?[[z,e.relationships[z]]]:[])).call(i,((e,t)=>{let[s,i]=t;return e[s]={value:i.thickness,label:"string"==typeof i.caption?i.caption:void 0,[G]:{function:{title:te}}},e}),{}):void 0}}t()(ke,"NEOVIS_DEFAULT_CONFIG",z),t()(ke,"NEOVIS_ADVANCED_CONFIG",G),t()(ke,"objectToTitleHtml",te),t()(ke,"objectToTitleString",se);const ze=ke})(),C})()));
//# sourceMappingURL=main.map2489d4e85c450ccb9a89