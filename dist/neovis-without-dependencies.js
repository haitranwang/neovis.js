!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/keys"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):"function"==typeof define&&define.amd?define(["@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/helpers/classPrivateFieldSet","@babel/runtime-corejs3/helpers/classPrivateFieldGet","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/instance/reduce","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/object/entries","@babel/runtime-corejs3/core-js-stable/weak-map","@babel/runtime-corejs3/core-js-stable/weak-set","@babel/runtime-corejs3/core-js-stable/instance/for-each","@babel/runtime-corejs3/core-js-stable/promise","@babel/runtime-corejs3/core-js-stable/instance/keys","@babel/runtime-corejs3/core-js-stable/set-timeout","neo4j-driver","neo4j-driver-core","vis-network/standalone","deepmerge","@babel/runtime-corejs3/core-js-stable/symbol"],t):"object"==typeof exports?exports.NeoVis=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/keys"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):e.NeoVis=t(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(self,((e,t,s,i,r,o,n,a,l,c,h,d,u,b,p,f,j,v,m,y)=>(()=>{"use strict";var w={852:e=>{e.exports=r},848:e=>{e.exports=a},349:e=>{e.exports=d},270:e=>{e.exports=b},820:e=>{e.exports=i},83:e=>{e.exports=n},209:e=>{e.exports=l},995:e=>{e.exports=o},723:e=>{e.exports=u},519:e=>{e.exports=p},581:e=>{e.exports=y},317:e=>{e.exports=c},483:e=>{e.exports=h},779:e=>{e.exports=s},642:e=>{e.exports=t},783:t=>{t.exports=e},613:e=>{e.exports=m},949:e=>{e.exports=f},55:e=>{e.exports=j},365:e=>{e.exports=v}},g={};function E(e){var t=g[e];if(void 0!==t)return t.exports;var s=g[e]={exports:{}};return w[e](s,s.exports,E),s.exports}E.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return E.d(t,{a:t}),t},E.d=(e,t)=>{for(var s in t)E.o(t,s)&&!E.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},E.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),E.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var C={};return(()=>{E.r(C),E.d(C,{EventController:()=>R,NEOVIS_ADVANCED_CONFIG:()=>G,NEOVIS_DEFAULT_CONFIG:()=>z,NeoVis:()=>Ne,NeoVisEvents:()=>L,default:()=>Me,migrateFromOldConfig:()=>Ve,objectToTitleHtml:()=>Z,objectToTitleString:()=>ee});var e=E(783),t=E.n(e),s=E(642),i=E.n(s),r=E(779),o=E.n(r),n=E(820),a=E.n(n),l=E(852),c=E.n(l),h=E(995),d=E.n(h),u=E(83),b=E.n(u),p=E(848),f=E.n(p),j=E(209),v=E.n(j),m=E(317),y=E.n(m),w=E(483),g=E.n(w),N=E(349),q=E.n(N),_=E(723),k=E.n(_),I=E(270),x=E.n(I),A=E(519),T=E.n(A),S=E(949),F=E.n(S),O=E(55),P=E(365);const D={neo4j:{initialQuery:"MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;",neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",driverConfig:{encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES",maxConnectionPoolSize:100,connectionAcquisitionTimeout:1e4,disableLosslessIntegers:!0},groupAsLabel:!0},visJs:{nodes:{font:{size:26,strokeWidth:7},scaling:{}},edges:{arrows:{to:{enabled:!1}},length:200},layout:{improvedLayout:!1,hierarchical:{enabled:!1,sortMethod:"hubsize"}},physics:{adaptiveTimestep:!0,stabilization:{iterations:200,fit:!0}}}};let L=function(e){return e.CompletionEvent="completed",e.ClickNodeEvent="clickNode",e.ClickEdgeEvent="clickEdge",e.ErrorEvent="error",e}({});class R{constructor(){t()(this,"_handlers",void 0),this._handlers={[L.CompletionEvent]:[],[L.ErrorEvent]:[],[L.ClickNodeEvent]:[],[L.ClickEdgeEvent]:[]}}register(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);this._handlers[e].push(t)}generateEvent(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);for(const s of this._handlers[e])s(t)}}var U=E(613),V=E.n(U),M=E(581),H=E.n(M);const z=H()(),G=H()();function W(e,t){B(e,t),t.add(e)}function $(e,t,s){B(e,t),t.set(e,s)}function B(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function Q(e){let{low:t,high:s}=e;return new(F().types.Integer)(t,s)}function Y(e){return e.labels?new(F().types.Node)(Q(e.identity),e.labels,e.properties):e.type?new(F().types.Relationship)(Q(e.identity),Q(e.start),Q(e.end),e.type,e.properties):e.segments?(e.segments=a()(t=e.segments).call(t,(t=>new(F().types.PathSegment)(new(F().types.Node)(Q(t.start.identity),t.start.labels,t.start.properties),new(F().types.Relationship)(Q(t.relationship.identity),Q(t.relationship.start),Q(t.relationship.end),e.type,t.relationship.properties),new(F().types.Node)(Q(t.end.identity),t.end.labels,t.end.properties)))),e.start=new(F().types.Node)(Q(e.start.identity),e.start.labels,e.start.properties),e.end=new(F().types.Node)(Q(e.end.identity),e.end.labels,e.end.properties),new(F().types.Path)(e.start,e.end,e.segments)):void 0;var t}function K(e,t){if(c()(t)&&t.length>1){let s=`<strong>${e}:</strong><br /><ul>`;for(const e of t)s+=`<li>${e}</li>`;return s+"</ul>"}return`<strong>${e}:</strong> ${t}<br>`}function X(e,t){if("object"==typeof t?.properties)return(0,O.isInt)(t.properties[e])?t.properties[e].toInt():t.properties[e];throw new Error("Neo4j object is not properly constructed")}function Z(e,t){let s="";t||(t=d()(e.properties));for(const i of t){const t=X(i,e);t&&(s+=K(i,t))}const i=document.createElement("div");return i.innerHTML=s,i}function ee(e,t){let s="";t||(t=d()(e.properties));for(const i of t){const t=X(i,e);t&&(s+=`${i}: ${t}\n`)}return s}var te=new(y()),se=new(y()),ie=new(y()),re=new(y()),oe=new(y()),ne=new(y()),ae=new(y()),le=new(y()),ce=new(g()),he=new(g()),de=new(g()),ue=new(g()),be=new(g()),pe=new(g()),fe=new(g()),je=new(g()),ve=new(g()),me=new(g()),ye=new(g()),we=new(g()),ge=new(g()),Ee=new(g()),Ce=new(g());class Ne{get nodes(){return o()(this,te).nodes}get edges(){return o()(this,te).edges}get _config(){return o()(this,re)}get network(){return o()(this,se)}constructor(e){W(this,Ce),W(this,Ee),W(this,ge),W(this,we),W(this,ye),W(this,me),W(this,ve),W(this,je),W(this,fe),W(this,pe),W(this,be),W(this,ue),W(this,de),W(this,he),W(this,ce),$(this,te,{writable:!0,value:{nodes:new P.DataSet,edges:new P.DataSet}}),$(this,se,{writable:!0,value:null}),$(this,ie,{writable:!0,value:new R}),$(this,re,{writable:!0,value:void 0}),$(this,oe,{writable:!0,value:void 0}),$(this,ne,{writable:!0,value:void 0}),$(this,ae,{writable:!0,value:void 0}),$(this,le,{writable:!0,value:void 0}),J(this,he,_e).call(this,e),J(this,ce,qe).call(this,e),J(this,ce,qe).call(this,D)}render(e,t){o()(this,re).dataFunction?J(this,we,De).call(this):J(this,ge,Le).call(this,e,t)}clearNetwork(){o()(this,te).nodes.clear(),o()(this,te).edges.clear()}registerOnEvent(e,t){o()(this,ie).register(e,t)}reinit(e){J(this,he,_e).call(this,e),this.render()}reload(){this.clearNetwork(),this.render()}stabilize(){o()(this,se).stopSimulation(),J(this,ce,qe).call(this,"Calling stopSimulation")}renderWithCypher(e){this.clearNetwork(),i()(this,ae,e),this.render()}updateWithCypher(e){this.render(e)}}function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";("log"!==t||o()(this,re).consoleDebug)&&console[t](e)}function _e(e){let t,s;if(e.nonFlat&&e.defaultLabelConfig){if(t=e.defaultLabelConfig,t[G])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look");if(s=e.defaultRelationshipsConfig,s[G])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look")}else t=e.labels?.[z],s=e.relationships?.[z];if(t)for(const s of d()(e.labels))e=e.nonFlat?{...e,labels:{...e.labels,[s]:V()(t,e.labels?.[s])}}:{...e,labels:{...e.labels,[s]:{...V()(t,e.labels?.[s]),[G]:V()(t[G]??{},(e.labels?.[s])[G]??{})}}};if(s)for(const t of d()(e.relationships))e=e.nonFlat?{...e,relationships:{...e.relationships,[t]:V()(s,e.relationships?.[t])}}:{...e,relationships:{...e.relationships,[t]:{...V()(s,e.relationships?.[t]),[G]:V()(s[G]??{},(e.relationships?.[t])[G]??{})}}};i()(this,re,e),e.dataFunction||(i()(this,oe,e.neo4j instanceof F().driver?e.neo4j:F().driver(e.neo4j?.serverUrl??D.neo4j.neo4jUri,F().auth.basic(e.neo4j?.serverUser??D.neo4j.neo4jUser,e.neo4j?.serverPassword??D.neo4j.neo4jPassword),V()(D.neo4j.driverConfig,e.neo4j?.driverConfig??{}))),i()(this,ne,e.serverDatabase),i()(this,ae,e.initialCypher??D.neo4j.initialQuery)),i()(this,le,document.getElementById(e.containerId)),o()(this,re).groupAsLabel=e.groupAsLabel??D.neo4j.groupAsLabel}async function ke(e,t){const s=o()(this,oe).session(o()(this,ne)&&{database:o()(this,ne)}),i=[];try{const r=await s.readTransaction((s=>s.run(e,{id:t})));for(const e of r.records)q()(e).call(e,(e=>{i.push(e)}))}finally{await s.close()}if(0!==i.length)return 1===i.length?i.pop():i}function Ie(e,t){if("function"==typeof e)return e(t);throw new Error("Function type property field must be a function")}function xe(e,t){if(e&&"object"==typeof e)for(const s of d()(e)){const i=e[s];i&&"object"==typeof i?(t[s]||(t[s]={}),J(this,be,xe).call(this,i,t[s])):t[s]=i}}function Ae(e,t,s){if(e&&"object"==typeof e)for(const i of d()(e)){const r=e[i];if("object"==typeof r)t[i]||(t[i]={}),J(this,pe,Ae).call(this,r,t[i],s);else{const r=e[i];t[i]=X(r,s)}}}function*Te(e,t,s){if(e&&"object"==typeof e)for(const i of d()(e)){const r=e[i];if(r&&"object"==typeof r)t[i]||(t[i]={}),yield*J(this,fe,Te).call(this,r,t[i],s);else{const e=J(this,de,ke).call(this,r,s);yield k().resolve(e).then((e=>{t[i]=e}))}}}function*Se(e,t,s){if(e&&"object"==typeof e)for(const i of d()(e)){const r=e[i];if(r&&"object"==typeof r)t[i]||(t[i]={}),yield*J(this,je,Se).call(this,r,t[i],s);else{const e=J(this,ue,Ie).call(this,r,s);yield k().resolve(e).then((e=>{t[i]=e}))}}}async function Fe(e,t,s,i){if(!e)return;let r,n,a,l;if(o()(this,re).nonFlat){if(void 0!==e[G])throw new Error("Advanced config and non flat config should not be together");r=e.static,n=e.cypher,a=e.property,l=e.function}else{const t=e[G];if(a=e,void 0!==t&&"object"!=typeof t)throw new Error("Advanced config should be an object. See documentation for details.");n=t?.cypher,r=t?.static,l=t?.function}J(this,pe,Ae).call(this,a,t,s),J(this,be,xe).call(this,r,t),await k().all(J(this,fe,Te).call(this,n,t,i)),await k().all(J(this,je,Se).call(this,l,t,s))}async function Oe(e){const t={},s=e.labels[0],i=o()(this,re)?.labels?.[s]??o()(this,re)?.defaultLabelConfig??o()(this,re)?.labels?.[z];return t.id=(0,O.isInt)(e.identity)?e.identity.toInt():e.identity,t.raw=e,o()(this,re).groupAsLabel&&(t.group=s),await J(this,ve,Fe).call(this,i,t,e,t.id),t}async function Pe(e){const t=o()(this,re)?.relationships?.[e.type]??o()(this,re).defaultRelationshipsConfig??o()(this,re)?.relationships?.[z],s={};return s.id=(0,O.isInt)(e.identity)?e.identity.toInt():e.identity,s.from=(0,O.isInt)(e.start)?e.start.toInt():e.start,s.to=(0,O.isInt)(e.end)?e.end.toInt():e.end,s.raw=e,await J(this,ve,Fe).call(this,t,s,e,s.id),s}async function De(){let e=0;try{const t=[];for await(const s of o()(this,re).dataFunction())t.push(J(this,Ee,Re).call(this,s)),e++;await k().all(t)}catch(e){return void o()(this,ie).generateEvent(L.ErrorEvent,{error:e})}J(this,Ce,Ue).call(this),o()(this,ie).generateEvent(L.CompletionEvent,{recordCount:e})}function Le(e,t){let s=0;const i=e||o()(this,ae),r=o()(this,oe).session(o()(this,ne)?{database:o()(this,ne)}:void 0),n=[];r.run(i,t).subscribe({onNext:e=>{s++,n.push(J(this,Ee,Re).call(this,e))},onCompleted:async()=>{await k().all(n),await r.close(),J(this,Ce,Ue).call(this),o()(this,ie).generateEvent(L.CompletionEvent,{recordCount:s})},onError:e=>{J(this,ce,qe).call(this,e,"error"),o()(this,ie).generateEvent(L.ErrorEvent,{error:e})}})}async function Re(e){if(!(e instanceof F().types.Record)){const t=e._fields;e._fields=a()(t).call(t,Y),e=new(F().types.Record)(x()(e),e._fields,e._fieldLookup)}J(this,ce,qe).call(this,"CLASS NAME"),J(this,ce,qe).call(this,e?.constructor.name),J(this,ce,qe).call(this,e);const t=a()(e).call(e,(async e=>{if(J(this,ce,qe).call(this,"Constructor:"),J(this,ce,qe).call(this,e?.constructor.name),(0,O.isNode)(e)){const t=await J(this,me,Oe).call(this,e);try{o()(this,te).nodes.update(t)}catch(e){J(this,ce,qe).call(this,e,"error")}}else if((0,O.isRelationship)(e)){const t=await J(this,ye,Pe).call(this,e);o()(this,te).edges.update(t)}else if((0,O.isPath)(e)){J(this,ce,qe).call(this,"PATH"),J(this,ce,qe).call(this,e);const t=await J(this,me,Oe).call(this,e.start),s=await J(this,me,Oe).call(this,e.end);o()(this,te).nodes.update(t),o()(this,te).nodes.update(s);for(const t of e.segments)o()(this,te).nodes.update(await J(this,me,Oe).call(this,t.start)),o()(this,te).nodes.update(await J(this,me,Oe).call(this,t.end)),o()(this,te).edges.update(await J(this,ye,Pe).call(this,t.relationship))}else if(c()(e))for(const t of e)if(J(this,ce,qe).call(this,"Array element constructor:"),J(this,ce,qe).call(this,t?.constructor.name),(0,O.isNode)(t)){const e=await J(this,me,Oe).call(this,t);o()(this,te).nodes.update(e)}else if((0,O.isRelationship)(t)){const e=await J(this,ye,Pe).call(this,t);o()(this,te).edges.update(e)}}));return k().all(t)}function Ue(){if(!o()(this,se)){const e=V()(D.visJs,o()(this,re).visConfig??{}),t=o()(this,le);J(this,ce,qe).call(this,o()(this,te).nodes),J(this,ce,qe).call(this,o()(this,te).edges),i()(this,se,new P.Network(t,o()(this,te),e))}J(this,ce,qe).call(this,"completed"),T()((()=>{o()(this,se).stopSimulation()}),1e4);const e=this;o()(this,se).on("click",(function(t){if(t.nodes.length>0){const s=this.getNodeAt(t.pointer.DOM);o()(e,ie).generateEvent(L.ClickNodeEvent,{nodeId:s,node:o()(e,te).nodes.get(s)})}else if(t.edges.length>0){const s=this.getEdgeAt(t.pointer.DOM);o()(e,ie).generateEvent(L.ClickEdgeEvent,{edgeId:s,edge:o()(e,te).edges.get(s)})}}))}function Ve(e){var t,s,i,r;return{containerId:e.container_id,initialCypher:e.initial_cypher,consoleDebug:e.console_debug,serverDatabase:e.server_database,neo4j:{serverUrl:e.server_url,serverUser:e.server_user,serverPassword:e.server_password,driverConfig:e.encrypted||e.trust?{encrypted:e.encrypted,trust:e.trust}:void 0},visConfig:e.arrows||e.hierarchical?{edges:e.arrows?{arrows:{to:{enabled:e.arrows}}}:void 0,layout:e.hierarchical?{enabled:e.hierarchical,sortMethod:e.hierarchical_sort_method}:void 0}:void 0,labels:e.labels?b()(t=f()(s=v()(e.labels)).call(s,e.labels?.[z]?[[z,e.labels[z]]]:[])).call(t,((e,t)=>{let[s,i]=t;return e[s]={label:"function"!=typeof i.caption?i.caption:void 0,value:i.size,group:i.community,[G]:{cypher:i.sizeCypher?{value:i.sizeCypher}:void 0,function:V()({title:e=>Z(e,i.title_properties)},"function"==typeof i.caption?{label:i.caption}:{}),static:{font:i.font,shape:i.image?"image":"dot",image:i.image}}},e}),{}):void 0,relationships:e.relationships?b()(i=f()(r=v()(e.relationships)).call(r,e.relationships[z]?[[z,e.relationships[z]]]:[])).call(i,((e,t)=>{let[s,i]=t;return e[s]={value:i.thickness,label:"string"==typeof i.caption?i.caption:void 0,[G]:{function:{title:Z}}},e}),{}):void 0}}t()(Ne,"NEOVIS_DEFAULT_CONFIG",z),t()(Ne,"NEOVIS_ADVANCED_CONFIG",G),t()(Ne,"objectToTitleHtml",Z),t()(Ne,"objectToTitleString",ee);const Me=Ne})(),C})()));
//# sourceMappingURL=main.map259696400b1a6aebc20c