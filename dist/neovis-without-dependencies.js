!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):"function"==typeof define&&define.amd?define(["@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/helpers/classPrivateFieldSet","@babel/runtime-corejs3/helpers/classPrivateFieldGet","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/promise","@babel/runtime-corejs3/core-js-stable/instance/reduce","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/object/entries","@babel/runtime-corejs3/core-js-stable/weak-map","@babel/runtime-corejs3/core-js-stable/weak-set","@babel/runtime-corejs3/core-js-stable/instance/for-each","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/set-timeout","neo4j-driver","neo4j-driver-core","vis-network/standalone","deepmerge","@babel/runtime-corejs3/core-js-stable/symbol"],t):"object"==typeof exports?exports.NeoVis=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):e.NeoVis=t(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(self,((e,t,s,r,i,o,n,a,l,c,h,u,d,b,p,f,j,v,m)=>(()=>{"use strict";var g={852:e=>{e.exports=r},848:e=>{e.exports=a},349:e=>{e.exports=u},820:e=>{e.exports=d},83:e=>{e.exports=n},209:e=>{e.exports=l},995:e=>{e.exports=i},723:e=>{e.exports=o},519:e=>{e.exports=b},581:e=>{e.exports=m},317:e=>{e.exports=c},483:e=>{e.exports=h},779:e=>{e.exports=s},642:e=>{e.exports=t},783:t=>{t.exports=e},613:e=>{e.exports=v},949:e=>{e.exports=p},55:e=>{e.exports=f},365:e=>{e.exports=j}},w={};function y(e){var t=w[e];if(void 0!==t)return t.exports;var s=w[e]={exports:{}};return g[e](s,s.exports,y),s.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var s in t)y.o(t,s)&&!y.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var E={};return(()=>{y.r(E),y.d(E,{EventController:()=>P,NEOVIS_ADVANCED_CONFIG:()=>H,NEOVIS_DEFAULT_CONFIG:()=>M,NeoVis:()=>ge,NeoVisEvents:()=>D,default:()=>De,migrateFromOldConfig:()=>Fe,objectToTitleHtml:()=>Q,objectToTitleString:()=>Y});var e=y(783),t=y.n(e),s=y(642),r=y.n(s),i=y(779),o=y.n(i),n=y(852),a=y.n(n),l=y(995),c=y.n(l),h=y(723),u=y.n(h),d=y(83),b=y.n(d),p=y(848),f=y.n(p),j=y(209),v=y.n(j),m=y(317),g=y.n(m),w=y(483),C=y.n(w),N=y(349),q=y.n(N),I=y(820),_=y.n(I),k=y(519),x=y.n(k),A=y(949),T=y.n(A),S=y(55),O=y(365);const F={neo4j:{initialQuery:"MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;",neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",driverConfig:{encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES",maxConnectionPoolSize:100,connectionAcquisitionTimeout:1e4,disableLosslessIntegers:!0},groupAsLabel:!0},visJs:{nodes:{font:{size:26,strokeWidth:7},scaling:{}},edges:{arrows:{to:{enabled:!1}},length:200},layout:{improvedLayout:!1,hierarchical:{enabled:!1,sortMethod:"hubsize"}},physics:{adaptiveTimestep:!0,stabilization:{iterations:200,fit:!0}}}};let D=function(e){return e.CompletionEvent="completed",e.ClickNodeEvent="clickNode",e.ClickEdgeEvent="clickEdge",e.ErrorEvent="error",e}({});class P{constructor(){t()(this,"_handlers",void 0),this._handlers={[D.CompletionEvent]:[],[D.ErrorEvent]:[],[D.ClickNodeEvent]:[],[D.ClickEdgeEvent]:[]}}register(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);this._handlers[e].push(t)}generateEvent(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);for(const s of this._handlers[e])s(t)}}var L=y(613),R=y.n(L),U=y(581),V=y.n(U);const M=V()(),H=V()();function z(e,t){W(e,t),t.add(e)}function G(e,t,s){W(e,t),t.set(e,s)}function W(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function B(e,t){if(a()(t)&&t.length>1){let s=`<strong>${e}:</strong><br /><ul>`;for(const e of t)s+=`<li>${e}</li>`;return s+"</ul>"}return`<strong>${e}:</strong> ${t}<br>`}function J(e,t){if("object"==typeof t?.properties)return(0,S.isInt)(t.properties[e])?t.properties[e].toInt():t.properties[e];throw new Error("Neo4j object is not properly constructed")}function Q(e,t){let s="";t||(t=c()(e.properties));for(const r of t){const t=J(r,e);t&&(s+=B(r,t))}const r=document.createElement("div");return r.innerHTML=s,r}function Y(e,t){let s="";t||(t=c()(e.properties));for(const r of t){const t=J(r,e);t&&(s+=`${r}: ${t}\n`)}return s}var K=new(g()),X=new(g()),Z=new(g()),ee=new(g()),te=new(g()),se=new(g()),re=new(g()),ie=new(g()),oe=new(C()),ne=new(C()),ae=new(C()),le=new(C()),ce=new(C()),he=new(C()),ue=new(C()),de=new(C()),be=new(C()),pe=new(C()),fe=new(C()),je=new(C()),ve=new(C()),me=new(C());class ge{get nodes(){return o()(this,K).nodes}get edges(){return o()(this,K).edges}get _config(){return o()(this,ee)}get network(){return o()(this,X)}constructor(e){z(this,me),z(this,ve),z(this,je),z(this,fe),z(this,pe),z(this,be),z(this,de),z(this,ue),z(this,he),z(this,ce),z(this,le),z(this,ae),z(this,ne),z(this,oe),G(this,K,{writable:!0,value:{nodes:new O.DataSet,edges:new O.DataSet}}),G(this,X,{writable:!0,value:null}),G(this,Z,{writable:!0,value:new P}),G(this,ee,{writable:!0,value:void 0}),G(this,te,{writable:!0,value:void 0}),G(this,se,{writable:!0,value:void 0}),G(this,re,{writable:!0,value:void 0}),G(this,ie,{writable:!0,value:void 0}),$(this,ne,ye).call(this,e),$(this,oe,we).call(this,e),$(this,oe,we).call(this,F)}render(e,t){let s=0;const r=e||o()(this,re),i=o()(this,te).session(o()(this,se)?{database:o()(this,se)}:void 0),n=[];o()(this,ee).dataFunction?$(this,je,Te).call(this):i.run(r,t).subscribe({onNext:e=>{s++,n.push($(this,ve,Se).call(this,e))},onCompleted:async()=>{await u().all(n),await i.close(),$(this,me,Oe).call(this),o()(this,Z).generateEvent(D.CompletionEvent,{recordCount:s})},onError:e=>{$(this,oe,we).call(this,e,"error"),o()(this,Z).generateEvent(D.ErrorEvent,{error:e})}})}clearNetwork(){o()(this,K).nodes.clear(),o()(this,K).edges.clear()}registerOnEvent(e,t){o()(this,Z).register(e,t)}reinit(e){$(this,ne,ye).call(this,e),this.render()}reload(){this.clearNetwork(),this.render()}stabilize(){o()(this,X).stopSimulation(),$(this,oe,we).call(this,"Calling stopSimulation")}renderWithCypher(e){this.clearNetwork(),r()(this,re,e),this.render()}updateWithCypher(e){this.render(e)}}function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";("log"!==t||o()(this,ee).consoleDebug)&&console[t](e)}function ye(e){let t,s;if(e.nonFlat&&e.defaultLabelConfig){if(t=e.defaultLabelConfig,t[H])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look");if(s=e.defaultRelationshipsConfig,s[H])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look")}else t=e.labels?.[M],s=e.relationships?.[M];if(t)for(const s of c()(e.labels))e=e.nonFlat?{...e,labels:{...e.labels,[s]:R()(t,e.labels?.[s])}}:{...e,labels:{...e.labels,[s]:{...R()(t,e.labels?.[s]),[H]:R()(t[H]??{},(e.labels?.[s])[H]??{})}}};if(s)for(const t of c()(e.relationships))e=e.nonFlat?{...e,relationships:{...e.relationships,[t]:R()(s,e.relationships?.[t])}}:{...e,relationships:{...e.relationships,[t]:{...R()(s,e.relationships?.[t]),[H]:R()(s[H]??{},(e.relationships?.[t])[H]??{})}}};r()(this,ee,e),r()(this,te,e.neo4j instanceof T().driver?e.neo4j:T().driver(e.neo4j?.serverUrl??F.neo4j.neo4jUri,T().auth.basic(e.neo4j?.serverUser??F.neo4j.neo4jUser,e.neo4j?.serverPassword??F.neo4j.neo4jPassword),R()(F.neo4j.driverConfig,e.neo4j?.driverConfig??{}))),r()(this,se,e.serverDatabase),r()(this,re,e.initialCypher??F.neo4j.initialQuery),r()(this,ie,document.getElementById(e.containerId)),o()(this,ee).groupAsLabel=e.groupAsLabel??F.neo4j.groupAsLabel}async function Ee(e,t){const s=o()(this,te).session(o()(this,se)&&{database:o()(this,se)}),r=[];try{const i=await s.readTransaction((s=>s.run(e,{id:t})));for(const e of i.records)q()(e).call(e,(e=>{r.push(e)}))}finally{await s.close()}if(0!==r.length)return 1===r.length?r.pop():r}function Ce(e,t){if("function"==typeof e)return e(t);throw new Error("Function type property field must be a function")}function Ne(e,t){if(e&&"object"==typeof e)for(const s of c()(e)){const r=e[s];r&&"object"==typeof r?(t[s]||(t[s]={}),$(this,ce,Ne).call(this,r,t[s])):t[s]=r}}function qe(e,t,s){if(e&&"object"==typeof e)for(const r of c()(e)){const i=e[r];if("object"==typeof i)t[r]||(t[r]={}),$(this,he,qe).call(this,i,t[r],s);else{const i=e[r];t[r]=J(i,s)}}}function*Ie(e,t,s){if(e&&"object"==typeof e)for(const r of c()(e)){const i=e[r];if(i&&"object"==typeof i)t[r]||(t[r]={}),yield*$(this,ue,Ie).call(this,i,t[r],s);else{const e=$(this,ae,Ee).call(this,i,s);yield u().resolve(e).then((e=>{t[r]=e}))}}}function*_e(e,t,s){if(e&&"object"==typeof e)for(const r of c()(e)){const i=e[r];if(i&&"object"==typeof i)t[r]||(t[r]={}),yield*$(this,de,_e).call(this,i,t[r],s);else{const e=$(this,le,Ce).call(this,i,s);yield u().resolve(e).then((e=>{t[r]=e}))}}}async function ke(e,t,s,r){if(!e)return;let i,n,a,l;if(o()(this,ee).nonFlat){if(void 0!==e[H])throw new Error("Advanced config and non flat config should not be together");i=e.static,n=e.cypher,a=e.property,l=e.function}else{const t=e[H];if(a=e,void 0!==t&&"object"!=typeof t)throw new Error("Advanced config should be an object. See documentation for details.");n=t?.cypher,i=t?.static,l=t?.function}$(this,he,qe).call(this,a,t,s),$(this,ce,Ne).call(this,i,t),await u().all($(this,ue,Ie).call(this,n,t,r)),await u().all($(this,de,_e).call(this,l,t,s))}async function xe(e){const t={},s=e.labels[0],r=o()(this,ee)?.labels?.[s]??o()(this,ee)?.defaultLabelConfig??o()(this,ee)?.labels?.[M];return t.id=(0,S.isInt)(e.identity)?e.identity.toInt():e.identity,t.raw=e,o()(this,ee).groupAsLabel&&(t.group=s),await $(this,be,ke).call(this,r,t,e,t.id),t}async function Ae(e){const t=o()(this,ee)?.relationships?.[e.type]??o()(this,ee).defaultRelationshipsConfig??o()(this,ee)?.relationships?.[M],s={};return s.id=(0,S.isInt)(e.identity)?e.identity.toInt():e.identity,s.from=(0,S.isInt)(e.start)?e.start.toInt():e.start,s.to=(0,S.isInt)(e.end)?e.end.toInt():e.end,s.raw=e,await $(this,be,ke).call(this,t,s,e,s.id),s}async function Te(){let e=0;try{const t=[];for await(const s of o()(this,ee).dataFunction())t.push($(this,ve,Se).call(this,s)),e++;await u().all(t)}catch(e){return void o()(this,Z).generateEvent(D.ErrorEvent,{error:e})}$(this,me,Oe).call(this),o()(this,Z).generateEvent(D.CompletionEvent,{recordCount:e})}async function Se(e){$(this,oe,we).call(this,"CLASS NAME"),$(this,oe,we).call(this,e?.constructor.name),$(this,oe,we).call(this,e);const t=_()(e).call(e,(async e=>{if($(this,oe,we).call(this,"Constructor:"),$(this,oe,we).call(this,e?.constructor.name),(0,S.isNode)(e)){const t=await $(this,pe,xe).call(this,e);try{o()(this,K).nodes.update(t)}catch(e){$(this,oe,we).call(this,e,"error")}}else if((0,S.isRelationship)(e)){const t=await $(this,fe,Ae).call(this,e);o()(this,K).edges.update(t)}else if((0,S.isPath)(e)){$(this,oe,we).call(this,"PATH"),$(this,oe,we).call(this,e);const t=await $(this,pe,xe).call(this,e.start),s=await $(this,pe,xe).call(this,e.end);o()(this,K).nodes.update(t),o()(this,K).nodes.update(s);for(const t of e.segments)o()(this,K).nodes.update(await $(this,pe,xe).call(this,t.start)),o()(this,K).nodes.update(await $(this,pe,xe).call(this,t.end)),o()(this,K).edges.update(await $(this,fe,Ae).call(this,t.relationship))}else if(a()(e))for(const t of e)if($(this,oe,we).call(this,"Array element constructor:"),$(this,oe,we).call(this,t?.constructor.name),(0,S.isNode)(t)){const e=await $(this,pe,xe).call(this,t);o()(this,K).nodes.update(e)}else if((0,S.isRelationship)(t)){const e=await $(this,fe,Ae).call(this,t);o()(this,K).edges.update(e)}}));return u().all(t)}function Oe(){if(!o()(this,X)){const e=R()(F.visJs,o()(this,ee).visConfig??{}),t=o()(this,ie);$(this,oe,we).call(this,o()(this,K).nodes),$(this,oe,we).call(this,o()(this,K).edges),r()(this,X,new O.Network(t,o()(this,K),e))}$(this,oe,we).call(this,"completed"),x()((()=>{o()(this,X).stopSimulation()}),1e4);const e=this;o()(this,X).on("click",(function(t){if(t.nodes.length>0){const s=this.getNodeAt(t.pointer.DOM);o()(e,Z).generateEvent(D.ClickNodeEvent,{nodeId:s,node:o()(e,K).nodes.get(s)})}else if(t.edges.length>0){const s=this.getEdgeAt(t.pointer.DOM);o()(e,Z).generateEvent(D.ClickEdgeEvent,{edgeId:s,edge:o()(e,K).edges.get(s)})}}))}function Fe(e){var t,s,r,i;return{containerId:e.container_id,initialCypher:e.initial_cypher,consoleDebug:e.console_debug,serverDatabase:e.server_database,neo4j:{serverUrl:e.server_url,serverUser:e.server_user,serverPassword:e.server_password,driverConfig:e.encrypted||e.trust?{encrypted:e.encrypted,trust:e.trust}:void 0},visConfig:e.arrows||e.hierarchical?{edges:e.arrows?{arrows:{to:{enabled:e.arrows}}}:void 0,layout:e.hierarchical?{enabled:e.hierarchical,sortMethod:e.hierarchical_sort_method}:void 0}:void 0,labels:e.labels?b()(t=f()(s=v()(e.labels)).call(s,e.labels?.[M]?[[M,e.labels[M]]]:[])).call(t,((e,t)=>{let[s,r]=t;return e[s]={label:"function"!=typeof r.caption?r.caption:void 0,value:r.size,group:r.community,[H]:{cypher:r.sizeCypher?{value:r.sizeCypher}:void 0,function:R()({title:e=>Q(e,r.title_properties)},"function"==typeof r.caption?{label:r.caption}:{}),static:{font:r.font,shape:r.image?"image":"dot",image:r.image}}},e}),{}):void 0,relationships:e.relationships?b()(r=f()(i=v()(e.relationships)).call(i,e.relationships[M]?[[M,e.relationships[M]]]:[])).call(r,((e,t)=>{let[s,r]=t;return e[s]={value:r.thickness,label:"string"==typeof r.caption?r.caption:void 0,[H]:{function:{title:Q}}},e}),{}):void 0}}t()(ge,"NEOVIS_DEFAULT_CONFIG",M),t()(ge,"NEOVIS_ADVANCED_CONFIG",H),t()(ge,"objectToTitleHtml",Q),t()(ge,"objectToTitleString",Y);const De=ge})(),E})()));
//# sourceMappingURL=neovis-without-dependencies.js.map